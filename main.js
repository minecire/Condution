const{app,BrowserWindow,systemPreferences,nativeTheme,ipcMain,Menu}=require("electron"),{autoUpdater}=require("electron-updater");autoUpdater.checkForUpdatesAndNotify();function createWindow(){let a=new BrowserWindow({width:950,height:650,minWidth:950,minHeight:650,title:"Condution",webPreferences:{nodeIntegration:!0},titleBarStyle:"hiddenInset",show:!1});nativeTheme.shouldUseDarkColors?a.setBackgroundColor("#161616"):a.setBackgroundColor("#f4f4f4"),a.on("page-title-updated",function(a){a.preventDefault()}),a.removeMenu(),a.loadFile("app.html"),nativeTheme.addListener("updated",function(){nativeTheme.shouldUseDarkColors?(a.setBackgroundColor("#161616"),a.webContents.send("systheme-dark","hello")):(a.setBackgroundColor("#f4f4f4"),a.webContents.send("systheme-light","hello"))}),ipcMain.on("updatecheck",()=>{autoUpdater.checkForUpdatesAndNotify()}),a.once("ready-to-show",function(){a.show()})}function createAbout(){let a=new BrowserWindow({width:550,height:175,minWidth:550,minHeight:175,maxWidth:550,maxHeight:175,title:"About Condution",webPreferences:{nodeIntegration:!0},maximizable:!1,show:!1});a.on("page-title-updated",function(a){a.preventDefault()}),a.removeMenu(),a.loadFile("about.html"),a.once("ready-to-show",function(){a.show()})}const isMac="darwin"===process.platform,template=[...(isMac?[{label:app.name,submenu:[{label:"About Condution",click:async()=>{createAbout()}},{type:"separator"},{role:"services"},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}]:[]),{label:"File",submenu:[isMac?{role:"close"}:{role:"quit"}]},{label:"Edit",submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},...(isMac?[{role:"pasteAndMatchStyle"},{role:"delete"},{role:"selectAll"},{type:"separator"},{label:"Speech",submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}]:[{role:"delete"},{type:"separator"},{role:"selectAll"}])]},{label:"View",submenu:[{role:"reload"},{role:"forcereload"},{role:"toggledevtools"},{type:"separator"},{role:"resetzoom"},{role:"zoomin"},{role:"zoomout"},{type:"separator"},{role:"togglefullscreen"}]},{label:"Window",submenu:[{role:"minimize"},{role:"zoom"},...(isMac?[{type:"separator"},{role:"front"},{type:"separator"},{role:"window"}]:[{role:"close"}])]},{role:"help",submenu:[{label:"Help and Documentation",click:async()=>{const{shell:a}=require("electron");await a.openExternal("https://condutiondocs.shabang.cf")}}]}],menu=Menu.buildFromTemplate(template);Menu.setApplicationMenu(menu),app.name="Condution",app.whenReady().then(createWindow);