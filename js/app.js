var css="text-shadow: -1px -1px hsl(0,100%,50%), 1px 1px hsl(5.4, 100%, 50%), 3px 2px hsl(10.8, 100%, 50%), 5px 3px hsl(16.2, 100%, 50%), 7px 4px hsl(21.6, 100%, 50%), 9px 5px hsl(27, 100%, 50%), 11px 6px hsl(32.4, 100%, 50%), 13px 7px hsl(37.8, 100%, 50%), 14px 8px hsl(43.2, 100%, 50%), 16px 9px hsl(48.6, 100%, 50%), 18px 10px hsl(54, 100%, 50%), 20px 11px hsl(59.4, 100%, 50%), 22px 12px hsl(64.8, 100%, 50%), 23px 13px hsl(70.2, 100%, 50%), 25px 14px hsl(75.6, 100%, 50%), 27px 15px hsl(81, 100%, 50%), 28px 16px hsl(86.4, 100%, 50%), 30px 17px hsl(91.8, 100%, 50%), 32px 18px hsl(97.2, 100%, 50%), 33px 19px hsl(102.6, 100%, 50%), 35px 20px hsl(108, 100%, 50%), 36px 21px hsl(113.4, 100%, 50%), 38px 22px hsl(118.8, 100%, 50%), 39px 23px hsl(124.2, 100%, 50%), 41px 24px hsl(129.6, 100%, 50%), 42px 25px hsl(135, 100%, 50%), 43px 26px hsl(140.4, 100%, 50%), 45px 27px hsl(145.8, 100%, 50%), 46px 28px hsl(151.2, 100%, 50%), 47px 29px hsl(156.6, 100%, 50%), 48px 30px hsl(162, 100%, 50%), 49px 31px hsl(167.4, 100%, 50%), 50px 32px hsl(172.8, 100%, 50%), 51px 33px hsl(178.2, 100%, 50%), 52px 34px hsl(183.6, 100%, 50%), 53px 35px hsl(189, 100%, 50%), 54px 36px hsl(194.4, 100%, 50%), 55px 37px hsl(199.8, 100%, 50%), 55px 38px hsl(205.2, 100%, 50%), 56px 39px hsl(210.6, 100%, 50%), 57px 40px hsl(216, 100%, 50%), 57px 41px hsl(221.4, 100%, 50%), 58px 42px hsl(226.8, 100%, 50%), 58px 43px hsl(232.2, 100%, 50%), 58px 44px hsl(237.6, 100%, 50%), 59px 45px hsl(243, 100%, 50%), 59px 46px hsl(248.4, 100%, 50%), 59px 47px hsl(253.8, 100%, 50%), 59px 48px hsl(259.2, 100%, 50%), 59px 49px hsl(264.6, 100%, 50%), 60px 50px hsl(270, 100%, 50%), 59px 51px hsl(275.4, 100%, 50%), 59px 52px hsl(280.8, 100%, 50%), 59px 53px hsl(286.2, 100%, 50%), 59px 54px hsl(291.6, 100%, 50%), 59px 55px hsl(297, 100%, 50%), 58px 56px hsl(302.4, 100%, 50%), 58px 57px hsl(307.8, 100%, 50%), 58px 58px hsl(313.2, 100%, 50%), 57px 59px hsl(318.6, 100%, 50%), 57px 60px hsl(324, 100%, 50%), 56px 61px hsl(329.4, 100%, 50%), 55px 62px hsl(334.8, 100%, 50%), 55px 63px hsl(340.2, 100%, 50%), 54px 64px hsl(345.6, 100%, 50%), 53px 65px hsl(351, 100%, 50%), 52px 66px hsl(356.4, 100%, 50%), 51px 67px hsl(361.8, 100%, 50%), 50px 68px hsl(367.2, 100%, 50%), 49px 69px hsl(372.6, 100%, 50%), 48px 70px hsl(378, 100%, 50%), 47px 71px hsl(383.4, 100%, 50%), 46px 72px hsl(388.8, 100%, 50%), 45px 73px hsl(394.2, 100%, 50%), 43px 74px hsl(399.6, 100%, 50%), 42px 75px hsl(405, 100%, 50%), 41px 76px hsl(410.4, 100%, 50%), 39px 77px hsl(415.8, 100%, 50%), 38px 78px hsl(421.2, 100%, 50%), 36px 79px hsl(426.6, 100%, 50%), 35px 80px hsl(432, 100%, 50%), 33px 81px hsl(437.4, 100%, 50%), 32px 82px hsl(442.8, 100%, 50%), 30px 83px hsl(448.2, 100%, 50%), 28px 84px hsl(453.6, 100%, 50%), 27px 85px hsl(459, 100%, 50%), 25px 86px hsl(464.4, 100%, 50%), 23px 87px hsl(469.8, 100%, 50%), 22px 88px hsl(475.2, 100%, 50%), 20px 89px hsl(480.6, 100%, 50%), 18px 90px hsl(486, 100%, 50%), 16px 91px hsl(491.4, 100%, 50%), 14px 92px hsl(496.8, 100%, 50%), 13px 93px hsl(502.2, 100%, 50%), 11px 94px hsl(507.6, 100%, 50%), 9px 95px hsl(513, 100%, 50%), 7px 96px hsl(518.4, 100%, 50%), 5px 97px hsl(523.8, 100%, 50%), 3px 98px hsl(529.2, 100%, 50%), 1px 99px hsl(534.6, 100%, 50%), 7px 100px hsl(540, 100%, 50%), -1px 101px hsl(545.4, 100%, 50%), -3px 102px hsl(550.8, 100%, 50%), -5px 103px hsl(556.2, 100%, 50%), -7px 104px hsl(561.6, 100%, 50%), -9px 105px hsl(567, 100%, 50%), -11px 106px hsl(572.4, 100%, 50%), -13px 107px hsl(577.8, 100%, 50%), -14px 108px hsl(583.2, 100%, 50%), -16px 109px hsl(588.6, 100%, 50%), -18px 110px hsl(594, 100%, 50%), -20px 111px hsl(599.4, 100%, 50%), -22px 112px hsl(604.8, 100%, 50%), -23px 113px hsl(610.2, 100%, 50%), -25px 114px hsl(615.6, 100%, 50%), -27px 115px hsl(621, 100%, 50%), -28px 116px hsl(626.4, 100%, 50%), -30px 117px hsl(631.8, 100%, 50%), -32px 118px hsl(637.2, 100%, 50%), -33px 119px hsl(642.6, 100%, 50%), -35px 120px hsl(648, 100%, 50%), -36px 121px hsl(653.4, 100%, 50%), -38px 122px hsl(658.8, 100%, 50%), -39px 123px hsl(664.2, 100%, 50%), -41px 124px hsl(669.6, 100%, 50%), -42px 125px hsl(675, 100%, 50%), -43px 126px hsl(680.4, 100%, 50%), -45px 127px hsl(685.8, 100%, 50%), -46px 128px hsl(691.2, 100%, 50%), -47px 129px hsl(696.6, 100%, 50%), -48px 130px hsl(702, 100%, 50%), -49px 131px hsl(707.4, 100%, 50%), -50px 132px hsl(712.8, 100%, 50%), -51px 133px hsl(718.2, 100%, 50%), -52px 134px hsl(723.6, 100%, 50%), -53px 135px hsl(729, 100%, 50%), -54px 136px hsl(734.4, 100%, 50%), -55px 137px hsl(739.8, 100%, 50%), -55px 138px hsl(745.2, 100%, 50%), -56px 139px hsl(750.6, 100%, 50%), -57px 140px hsl(756, 100%, 50%), -57px 141px hsl(761.4, 100%, 50%), -58px 142px hsl(766.8, 100%, 50%), -58px 143px hsl(772.2, 100%, 50%), -58px 144px hsl(777.6, 100%, 50%), -59px 145px hsl(783, 100%, 50%), -59px 146px hsl(788.4, 100%, 50%), -59px 147px hsl(793.8, 100%, 50%), -59px 148px hsl(799.2, 100%, 50%), -59px 149px hsl(804.6, 100%, 50%), -60px 150px hsl(810, 100%, 50%), -59px 151px hsl(815.4, 100%, 50%), -59px 152px hsl(820.8, 100%, 50%), -59px 153px hsl(826.2, 100%, 50%), -59px 154px hsl(831.6, 100%, 50%), -59px 155px hsl(837, 100%, 50%), -58px 156px hsl(842.4, 100%, 50%), -58px 157px hsl(847.8, 100%, 50%), -58px 158px hsl(853.2, 100%, 50%), -57px 159px hsl(858.6, 100%, 50%), -57px 160px hsl(864, 100%, 50%), -56px 161px hsl(869.4, 100%, 50%), -55px 162px hsl(874.8, 100%, 50%), -55px 163px hsl(880.2, 100%, 50%), -54px 164px hsl(885.6, 100%, 50%), -53px 165px hsl(891, 100%, 50%), -52px 166px hsl(896.4, 100%, 50%), -51px 167px hsl(901.8, 100%, 50%), -50px 168px hsl(907.2, 100%, 50%), -49px 169px hsl(912.6, 100%, 50%), -48px 170px hsl(918, 100%, 50%), -47px 171px hsl(923.4, 100%, 50%), -46px 172px hsl(928.8, 100%, 50%), -45px 173px hsl(934.2, 100%, 50%), -43px 174px hsl(939.6, 100%, 50%), -42px 175px hsl(945, 100%, 50%), -41px 176px hsl(950.4, 100%, 50%), -39px 177px hsl(955.8, 100%, 50%), -38px 178px hsl(961.2, 100%, 50%), -36px 179px hsl(966.6, 100%, 50%), -35px 180px hsl(972, 100%, 50%), -33px 181px hsl(977.4, 100%, 50%), -32px 182px hsl(982.8, 100%, 50%), -30px 183px hsl(988.2, 100%, 50%), -28px 184px hsl(993.6, 100%, 50%), -27px 185px hsl(999, 100%, 50%), -25px 186px hsl(1004.4, 100%, 50%), -23px 187px hsl(1009.8, 100%, 50%), -22px 188px hsl(1015.2, 100%, 50%), -20px 189px hsl(1020.6, 100%, 50%), -18px 190px hsl(1026, 100%, 50%), -16px 191px hsl(1031.4, 100%, 50%), -14px 192px hsl(1036.8, 100%, 50%), -13px 193px hsl(1042.2, 100%, 50%), -11px 194px hsl(1047.6, 100%, 50%), -9px 195px hsl(1053, 100%, 50%), -7px 196px hsl(1058.4, 100%, 50%), -5px 197px hsl(1063.8, 100%, 50%), -3px 198px hsl(1069.2, 100%, 50%), -1px 199px hsl(1074.6, 100%, 50%), -1px 200px hsl(1080, 100%, 50%), 1px 201px hsl(1085.4, 100%, 50%), 3px 202px hsl(1090.8, 100%, 50%), 5px 203px hsl(1096.2, 100%, 50%), 7px 204px hsl(1101.6, 100%, 50%), 9px 205px hsl(1107, 100%, 50%), 11px 206px hsl(1112.4, 100%, 50%), 13px 207px hsl(1117.8, 100%, 50%), 14px 208px hsl(1123.2, 100%, 50%), 16px 209px hsl(1128.6, 100%, 50%), 18px 210px hsl(1134, 100%, 50%), 20px 211px hsl(1139.4, 100%, 50%), 22px 212px hsl(1144.8, 100%, 50%), 23px 213px hsl(1150.2, 100%, 50%), 25px 214px hsl(1155.6, 100%, 50%), 27px 215px hsl(1161, 100%, 50%), 28px 216px hsl(1166.4, 100%, 50%), 30px 217px hsl(1171.8, 100%, 50%), 32px 218px hsl(1177.2, 100%, 50%), 33px 219px hsl(1182.6, 100%, 50%), 35px 220px hsl(1188, 100%, 50%), 36px 221px hsl(1193.4, 100%, 50%), 38px 222px hsl(1198.8, 100%, 50%), 39px 223px hsl(1204.2, 100%, 50%), 41px 224px hsl(1209.6, 100%, 50%), 42px 225px hsl(1215, 100%, 50%), 43px 226px hsl(1220.4, 100%, 50%), 45px 227px hsl(1225.8, 100%, 50%), 46px 228px hsl(1231.2, 100%, 50%), 47px 229px hsl(1236.6, 100%, 50%), 48px 230px hsl(1242, 100%, 50%), 49px 231px hsl(1247.4, 100%, 50%), 50px 232px hsl(1252.8, 100%, 50%), 51px 233px hsl(1258.2, 100%, 50%), 52px 234px hsl(1263.6, 100%, 50%), 53px 235px hsl(1269, 100%, 50%), 54px 236px hsl(1274.4, 100%, 50%), 55px 237px hsl(1279.8, 100%, 50%), 55px 238px hsl(1285.2, 100%, 50%), 56px 239px hsl(1290.6, 100%, 50%), 57px 240px hsl(1296, 100%, 50%), 57px 241px hsl(1301.4, 100%, 50%), 58px 242px hsl(1306.8, 100%, 50%), 58px 243px hsl(1312.2, 100%, 50%), 58px 244px hsl(1317.6, 100%, 50%), 59px 245px hsl(1323, 100%, 50%), 59px 246px hsl(1328.4, 100%, 50%), 59px 247px hsl(1333.8, 100%, 50%), 59px 248px hsl(1339.2, 100%, 50%), 59px 249px hsl(1344.6, 100%, 50%), 60px 250px hsl(1350, 100%, 50%), 59px 251px hsl(1355.4, 100%, 50%), 59px 252px hsl(1360.8, 100%, 50%), 59px 253px hsl(1366.2, 100%, 50%), 59px 254px hsl(1371.6, 100%, 50%), 59px 255px hsl(1377, 100%, 50%), 58px 256px hsl(1382.4, 100%, 50%), 58px 257px hsl(1387.8, 100%, 50%), 58px 258px hsl(1393.2, 100%, 50%), 57px 259px hsl(1398.6, 100%, 50%), 57px 260px hsl(1404, 100%, 50%), 56px 261px hsl(1409.4, 100%, 50%), 55px 262px hsl(1414.8, 100%, 50%), 55px 263px hsl(1420.2, 100%, 50%), 54px 264px hsl(1425.6, 100%, 50%), 53px 265px hsl(1431, 100%, 50%), 52px 266px hsl(1436.4, 100%, 50%), 51px 267px hsl(1441.8, 100%, 50%), 50px 268px hsl(1447.2, 100%, 50%), 49px 269px hsl(1452.6, 100%, 50%), 48px 270px hsl(1458, 100%, 50%), 47px 271px hsl(1463.4, 100%, 50%), 46px 272px hsl(1468.8, 100%, 50%), 45px 273px hsl(1474.2, 100%, 50%), 43px 274px hsl(1479.6, 100%, 50%), 42px 275px hsl(1485, 100%, 50%), 41px 276px hsl(1490.4, 100%, 50%), 39px 277px hsl(1495.8, 100%, 50%), 38px 278px hsl(1501.2, 100%, 50%), 36px 279px hsl(1506.6, 100%, 50%), 35px 280px hsl(1512, 100%, 50%), 33px 281px hsl(1517.4, 100%, 50%), 32px 282px hsl(1522.8, 100%, 50%), 30px 283px hsl(1528.2, 100%, 50%), 28px 284px hsl(1533.6, 100%, 50%), 27px 285px hsl(1539, 100%, 50%), 25px 286px hsl(1544.4, 100%, 50%), 23px 287px hsl(1549.8, 100%, 50%), 22px 288px hsl(1555.2, 100%, 50%), 20px 289px hsl(1560.6, 100%, 50%), 18px 290px hsl(1566, 100%, 50%), 16px 291px hsl(1571.4, 100%, 50%), 14px 292px hsl(1576.8, 100%, 50%), 13px 293px hsl(1582.2, 100%, 50%), 11px 294px hsl(1587.6, 100%, 50%), 9px 295px hsl(1593, 100%, 50%), 7px 296px hsl(1598.4, 100%, 50%), 5px 297px hsl(1603.8, 100%, 50%), 3px 298px hsl(1609.2, 100%, 50%), 1px 299px hsl(1614.6, 100%, 50%), 2px 300px hsl(1620, 100%, 50%), -1px 301px hsl(1625.4, 100%, 50%), -3px 302px hsl(1630.8, 100%, 50%), -5px 303px hsl(1636.2, 100%, 50%), -7px 304px hsl(1641.6, 100%, 50%), -9px 305px hsl(1647, 100%, 50%), -11px 306px hsl(1652.4, 100%, 50%), -13px 307px hsl(1657.8, 100%, 50%), -14px 308px hsl(1663.2, 100%, 50%), -16px 309px hsl(1668.6, 100%, 50%), -18px 310px hsl(1674, 100%, 50%), -20px 311px hsl(1679.4, 100%, 50%), -22px 312px hsl(1684.8, 100%, 50%), -23px 313px hsl(1690.2, 100%, 50%), -25px 314px hsl(1695.6, 100%, 50%), -27px 315px hsl(1701, 100%, 50%), -28px 316px hsl(1706.4, 100%, 50%), -30px 317px hsl(1711.8, 100%, 50%), -32px 318px hsl(1717.2, 100%, 50%), -33px 319px hsl(1722.6, 100%, 50%), -35px 320px hsl(1728, 100%, 50%), -36px 321px hsl(1733.4, 100%, 50%), -38px 322px hsl(1738.8, 100%, 50%), -39px 323px hsl(1744.2, 100%, 50%), -41px 324px hsl(1749.6, 100%, 50%), -42px 325px hsl(1755, 100%, 50%), -43px 326px hsl(1760.4, 100%, 50%), -45px 327px hsl(1765.8, 100%, 50%), -46px 328px hsl(1771.2, 100%, 50%), -47px 329px hsl(1776.6, 100%, 50%), -48px 330px hsl(1782, 100%, 50%), -49px 331px hsl(1787.4, 100%, 50%), -50px 332px hsl(1792.8, 100%, 50%), -51px 333px hsl(1798.2, 100%, 50%), -52px 334px hsl(1803.6, 100%, 50%), -53px 335px hsl(1809, 100%, 50%), -54px 336px hsl(1814.4, 100%, 50%), -55px 337px hsl(1819.8, 100%, 50%), -55px 338px hsl(1825.2, 100%, 50%), -56px 339px hsl(1830.6, 100%, 50%), -57px 340px hsl(1836, 100%, 50%), -57px 341px hsl(1841.4, 100%, 50%), -58px 342px hsl(1846.8, 100%, 50%), -58px 343px hsl(1852.2, 100%, 50%), -58px 344px hsl(1857.6, 100%, 50%), -59px 345px hsl(1863, 100%, 50%), -59px 346px hsl(1868.4, 100%, 50%), -59px 347px hsl(1873.8, 100%, 50%), -59px 348px hsl(1879.2, 100%, 50%), -59px 349px hsl(1884.6, 100%, 50%), -60px 350px hsl(1890, 100%, 50%), -59px 351px hsl(1895.4, 100%, 50%), -59px 352px hsl(1900.8, 100%, 50%), -59px 353px hsl(1906.2, 100%, 50%), -59px 354px hsl(1911.6, 100%, 50%), -59px 355px hsl(1917, 100%, 50%), -58px 356px hsl(1922.4, 100%, 50%), -58px 357px hsl(1927.8, 100%, 50%), -58px 358px hsl(1933.2, 100%, 50%), -57px 359px hsl(1938.6, 100%, 50%), -57px 360px hsl(1944, 100%, 50%), -56px 361px hsl(1949.4, 100%, 50%), -55px 362px hsl(1954.8, 100%, 50%), -55px 363px hsl(1960.2, 100%, 50%), -54px 364px hsl(1965.6, 100%, 50%), -53px 365px hsl(1971, 100%, 50%), -52px 366px hsl(1976.4, 100%, 50%), -51px 367px hsl(1981.8, 100%, 50%), -50px 368px hsl(1987.2, 100%, 50%), -49px 369px hsl(1992.6, 100%, 50%), -48px 370px hsl(1998, 100%, 50%), -47px 371px hsl(2003.4, 100%, 50%), -46px 372px hsl(2008.8, 100%, 50%), -45px 373px hsl(2014.2, 100%, 50%), -43px 374px hsl(2019.6, 100%, 50%), -42px 375px hsl(2025, 100%, 50%), -41px 376px hsl(2030.4, 100%, 50%), -39px 377px hsl(2035.8, 100%, 50%), -38px 378px hsl(2041.2, 100%, 50%), -36px 379px hsl(2046.6, 100%, 50%), -35px 380px hsl(2052, 100%, 50%), -33px 381px hsl(2057.4, 100%, 50%), -32px 382px hsl(2062.8, 100%, 50%), -30px 383px hsl(2068.2, 100%, 50%), -28px 384px hsl(2073.6, 100%, 50%), -27px 385px hsl(2079, 100%, 50%), -25px 386px hsl(2084.4, 100%, 50%), -23px 387px hsl(2089.8, 100%, 50%), -22px 388px hsl(2095.2, 100%, 50%), -20px 389px hsl(2100.6, 100%, 50%), -18px 390px hsl(2106, 100%, 50%), -16px 391px hsl(2111.4, 100%, 50%), -14px 392px hsl(2116.8, 100%, 50%), -13px 393px hsl(2122.2, 100%, 50%), -11px 394px hsl(2127.6, 100%, 50%), -9px 395px hsl(2133, 100%, 50%), -7px 396px hsl(2138.4, 100%, 50%), -5px 397px hsl(2143.8, 100%, 50%), -3px 398px hsl(2149.2, 100%, 50%), -1px 399px hsl(2154.6, 100%, 50%); font-size: 40px;";const{ipcRenderer}=require("electron");E.start(firebase),window.matchMedia("(prefers-color-scheme:dark)").matches?(currentTheme="condutiontheme-default-dark",$("body").removeClass(),$("body").addClass(currentTheme)):(currentTheme="condutiontheme-default-light",$("body").removeClass(),$("body").addClass(currentTheme)),ipcRenderer.on("systheme-dark",function(){currentTheme="condutiontheme-default-dark",$("body").removeClass(),$("body").addClass(currentTheme)}),ipcRenderer.on("systheme-light",function(){currentTheme="condutiontheme-default-light",$("body").removeClass(),$("body").addClass(currentTheme)});let loading_greeting_msgs=["Welcome.","Bontehu!","Breath.","Coffee or Tea?","Productivity!","Look up!","Ready? Go!","Accomplish!"],loading_greeting=loading_greeting_msgs[Math.floor(Math.random()*loading_greeting_msgs.length)];$("#loading-msg").html(loading_greeting),lottie.loadAnimation({container:$("#loading-anim")[0],renderer:"svg",autoplay:!0,loop:!0,path:"static/loadanim_final.json"}),$("#loading").hide().css("display","flex").fadeIn();const{remote}=require("electron"),{Menu,MenuItem}=remote;"win32"===process.platform?($("#main-head-win32").show(),$("#left-menu").addClass("win32-windowing"),$("#content-area").addClass("win32-windowing"),$("#window-minimize").click(()=>remote.BrowserWindow.getFocusedWindow().minimize()),$("#window-maximize").click(function(){remote.BrowserWindow.getFocusedWindow().isMaximized()?remote.BrowserWindow.getFocusedWindow().unmaximize():remote.BrowserWindow.getFocusedWindow().maximize()}),$("#window-close").click(()=>remote.BrowserWindow.getFocusedWindow().close())):"darwin"===process.platform&&($("#main-head-darwin").show(),$("#left-menu").addClass("darwin-windowing-left"),$("#content-area").addClass("darwin-windowing-right"));const interfaceUtil=function(){const e=require("sortablejs");return{Sortable:e,sMatch:function(e){return function findMatches(p,s){let t,x;t=[],x=new RegExp(p,"i"),$.each(e,function(e,p){x.test(p)&&t.push(p)}),s(t)}},sp:function(e,p){let s=chrono.parse(p)[0].start.date();return{hour:s.getHours(),minute:s.getMinutes(),second:s.getSeconds(),millisec:s.getMilliseconds(),microsec:s.getMicroseconds(),timezone:-1*s.getTimezoneOffset()}},spf:e=>chrono.parse(e)[0],daysBetween:function(e,p){let s=Math.abs(e.getTime()-p.getTime());return s/86400000},taskHTML:function(e,p,s,t,x){return`<div id="task-${e}" class="task thov"> <div id="task-display-${e}" class="task-display" style="display:block"> <input type="checkbox" id="task-check-${e}" class="task-check"/> <label class="task-pseudocheck" id="task-pseudocheck-${e}" for="task-check-${e}" style="font-family: 'Inter', sans-serif;">&zwnj;</label> <input class="task-name" id="task-name-${e}" type="text" autocomplete="off" value="${p}"> <div class="task-trash task-subicon" id="task-trash-${e}" style="float: right; display: none;"><i class="fas fa-trash"></i></div> <div class="task-repeat task-subicon" id="task-repeat-${e}" style="float: right; display: none;"><i class="fas fa-redo-alt"></i></div> </div> <div id="task-edit-${e}" class="task-edit" style="display:none"> <textarea class="task-desc" id="task-desc-${e}" type="text" autocomplete="off" placeholder="Description">${s}</textarea> <div class="task-tools" style="margin-bottom: 9px;"> <div class="label"><i class="fas fa-flag"></i></div> <div class="btn-group btn-group-toggle task-flagged" id="task-flagged-${e}" data-toggle="buttons" style="margin-right: 20px !important"> <label class="btn task-flagged" id="task-flagged-no-${e}"> <input type="radio" name="task-flagged" class="task-flagged-no"> <i class="far fa-circle" style="transform:translateY(-4px)"></i> </label> <label class="btn task-flagged" id="task-flagged-yes-${e}"> <input type="radio" name="task-flagged" class="task-flagged-yes"> <i class="fas fa-circle" style="transform:translateY(-4px)"></i> </label> </div> <div class="label"><i class="fas fa-globe-americas"></i></div> <div class="btn-group btn-group-toggle task-floating" id="task-floating-${e}" data-toggle="buttons" style="margin-right: 14px !important"> <label class="btn task-floating" id="task-floating-no-${e}"> <input type="radio" name="task-floating"> <i class="far fa-circle" style="transform:translateY(-4px)"></i> </label> <label class="btn task-floating" id="task-floating-yes-${e}"> <input type="radio" name="task-floating"> <i class="fas fa-circle" style="transform:translateY(-4px)"></i> </label> </div> <div class="label"><i class="far fa-play-circle"></i></div> <input class="task-defer textbox datebox" id="task-defer-${e}" type="text" autocomplete="off" style="margin-right: 10px"> <i class="fas fa-caret-right" style="color:${x}; font-size:13px; transform: translateY(3px); margin-right: 5px"></i> <div class="label"><i class="far fa-stop-circle"></i></div> <input class="task-due textbox datebox" id="task-due-${e}" type="text" autocomplete="off" style="margin-right: 20px"> </div> <div class="task-tools"> <div class="label"><i class="fas fa-tasks"></i></div> <select class="task-project textbox editable-select" id="task-project-${e}" style="margin-right: 14px"> ${t} </select> <div class="label"><i class="fas fa-tags"></i></div>
<input class="task-tag textbox" id="task-tag-${e}" type="text" value="" onkeypress="this.style.width = ((this.value.length + 5) * 8) + 'px';" data-role="tagsinput" /> </div> </div> </div>`},gtc:e=>$("."+currentTheme).css(e),newPHI:function(){$(".blankimage").attr("src","./static/BlkArt/BlkArt_"+Math.floor(3*Math.random())+".png")}}}();let ui=function(){let e,s,t,x,l,a,o,h,r,d=["Hello there,","Hey,","What's up,","Howdy,","Welcome,","Yo!"],c=d[Math.floor(Math.random()*d.length)],n={currentView:"upcoming-page",projectDir:[],pageContentID:void 0,pageLocks:[],dateLoaders:{},interfaceLocks:{qaLock:!1,nprojLock:!1,npspLock:!1,ntLock:!1,reloadLock:!1}};activeMenu="today";let i=async function(){e=await E.db.getProjectsandTags(C),s=e[0][0],t=e[1][0],x=e[0][1],l=e[1][1],a=await E.db.getPerspectives(C),h=await E.db.getItemAvailability(C),o=await E.db.getInboxandDS(C,h),r=await async function(){let e=[],p=(await E.db.getTopLevelProjects(C))[0];for(key in p)e.push(await E.db.getProjectStructure(C,key,recursive=!0));return e}()},g=function(e){return!n.interfaceLocks.reloadLock&&(n.pageLocks.push(!0),new Promise(function(p){let s=e?100:1750;setTimeout(()=>{1<n.pageLocks.length?(n.pageLocks.pop(),p("Don't Worry: error refreshing... Too many locks.")):null===m?(D(n.currentView,n.pageContentID),L().then(()=>$("#"+activeMenu).addClass("menuitem-selected")),p("Refresh success...")):(n.pageLocks.pop(),p("Don't Worry: error refreshing... Task active."))},s)}))};const u=function(){$("#perspective-back").on("click",function(){$("#perspective-unit").fadeOut(200),$("#overlay").fadeOut(200,()=>g(!0)),$("#"+activeMenu).addClass("menuitem-selected")}),$(document).on("click","#overlay",function(p){p.target===this&&($(".repeat-subunit").slideUp(),$("#repeat-toggle-group").slideDown(),$("#repeat-type").fadeOut(()=>$("#repeat-type").html("")),$("#repeat-unit").fadeOut(200),$("#overlay").fadeOut(200,()=>g(!0)),$("#"+activeMenu).addClass("menuitem-selected"),$("#repeat-daterow").children().each(function(){$(this).css({"background-color":interfaceUtil.gtc("--background-feature")})}),$("#repeat-monthgrid").children().each(function(){$(this).css({"background-color":interfaceUtil.gtc("--background")})}))});let e;$("#pquery").change(function(){E.db.modifyPerspective(C,e,{query:$(this).val()})}),$("#perspective-edit-name").change(function(){E.db.modifyPerspective(C,e,{name:$(this).val()})}),$("#pavail-avail").click(function(){E.db.modifyPerspective(C,e,{avail:"avail"}),$("#perspective-avail-toggle").html("Include: Available &nbsp;<i class=\"fa fa-caret-down\"></i>"),$("#pavail-group").children().css("background-color","transparent"),$("#pavail-avail").css("background-color",interfaceUtil.gtc("--background-feature"))}),$("#pavail-flagged").click(function(){E.db.modifyPerspective(C,e,{avail:"flagged"}),$("#perspective-avail-toggle").html("Include: Flagged&nbsp;<i class=\"fa fa-caret-down\"></i>"),$("#pavail-group").children().css("background-color","transparent"),$("#pavail-flagged").css("background-color",interfaceUtil.gtc("--background-feature"))}),$("#pavail-remain").click(function(){E.db.modifyPerspective(C,e,{avail:"remain"}),$("#perspective-avail-toggle").html("Include: Remain&nbsp;<i class=\"fa fa-caret-down\"></i>"),$("#pavail-group").children().css("background-color","transparent"),$("#pavail-remain").css("background-color",interfaceUtil.gtc("--background-feature"))}),$("#pord-due-ascend").click(function(){E.db.modifyPerspective(C,e,{tord:"duas"}),$("#perspective-order-toggle").html("Order: ascend by due&nbsp;<i class=\"fa fa-caret-down\"></i>"),$("#pord-group").children().css("background-color","transparent"),$("#pord-due-ascend").css("background-color",interfaceUtil.gtc("--background-feature"))}),$("#pord-due-descend").click(function(){E.db.modifyPerspective(C,e,{tord:"duds"}),$("#perspective-order-toggle").html("Order: descend by due&nbsp;<i class=\"fa fa-caret-down\"></i>"),$("#pord-group").children().css("background-color","transparent"),$("#pord-due-descend").css("background-color",interfaceUtil.gtc("--background-feature"))}),$("#pord-defer-ascend").click(function(){E.db.modifyPerspective(C,e,{tord:"deas"}),$("#perspective-order-toggle").html("Order: ascend by defer&nbsp;<i class=\"fa fa-caret-down\"></i>"),$("#pord-group").children().css("background-color","transparent"),$("#pord-defer-ascend").css("background-color",interfaceUtil.gtc("--background-feature"))}),$("#pord-defer-descend").click(function(){E.db.modifyPerspective(C,e,{tord:"deds"}),$("#perspective-order-toggle").html("Order: descend by defer&nbsp;<i class=\"fa fa-caret-down\"></i>"),$("#pord-group").children().css("background-color","transparent"),$("#pord-defer-descend").css("background-color",interfaceUtil.gtc("--background-feature"))}),$("#pord-alpha").click(function(){E.db.modifyPerspective(C,e,{tord:"alpha"}),$("#perspective-order-toggle").html("Order: alphabetical&nbsp;<i class=\"fa fa-caret-down\"></i>"),$("#pord-group").children().css("background-color","transparent"),$("#pord-alpha").css("background-color",interfaceUtil.gtc("--background-feature"))});const p=function(p){$("#repeat-unit").hide(),e=p,$("#overlay").fadeIn(200).css("display","flex").hide().fadeIn(200),$("#perspective-unit").fadeIn(200),$("#perspective-edit-name").val(a[0][p].name),$("#pquery").val(a[0][p].query);let s=a[0][p].tord,t=a[0][p].avail;s&&""!==s&&("duas"===s?($("#perspective-order-toggle").html("Order: ascend by due&nbsp;<i class=\"fa fa-caret-down\"></i>"),$("#pord-group").children().css("background-color","transparent"),$("#pord-due-ascend").css("background-color",interfaceUtil.gtc("--background-feature"))):"duds"===s?($("#perspective-order-toggle").html("Order: descend by due&nbsp;<i class=\"fa fa-caret-down\"></i>"),$("#pord-group").children().css("background-color","transparent"),$("#pord-due-descend").css("background-color",interfaceUtil.gtc("--background-feature"))):"deas"===s?($("#perspective-order-toggle").html("Order: ascend by defer&nbsp;<i class=\"fa fa-caret-down\"></i>"),$("#pord-group").children().css("background-color","transparent"),$("#pord-defer-ascend").css("background-color",interfaceUtil.gtc("--background-feature"))):"deds"===s?($("#perspective-order-toggle").html("Order: descend by defer&nbsp;<i class=\"fa fa-caret-down\"></i>"),$("#pord-group").children().css("background-color","transparent"),$("#pord-defer-descend").css("background-color",interfaceUtil.gtc("--background-feature"))):"alpha"===s?($("#perspective-order-toggle").html("Order: alphabetical&nbsp;<i class=\"fa fa-caret-down\"></i>"),$("#pord-group").children().css("background-color","transparent"),$("#pord-alpha").css("background-color",interfaceUtil.gtc("--background-feature"))):void 0);t&&""!==t&&("avail"===t?($("#pavail-group").children().css("background-color","transparent"),$("#pavail-avail").css("background-color",interfaceUtil.gtc("--background-feature")),$("#perspective-avail-toggle").html("Include: Available &nbsp;<i class=\"fa fa-caret-down\"></i>")):"flagged"===t?($("#pavail-group").children().css("background-color","transparent"),$("#pavail-flagged").css("background-color",interfaceUtil.gtc("--background-feature")),$("#perspective-avail-toggle").html("Include: Flagged&nbsp;<i class=\"fa fa-caret-down\"></i>")):"remain"===t?($("#pavail-group").children().css("background-color","transparent"),$("#pavail-remain").css("background-color",interfaceUtil.gtc("--background-feature")),$("#perspective-avail-toggle").html("Include: Remain&nbsp;<i class=\"fa fa-caret-down\"></i>")):void 0);setTimeout(function(){$("#pquery").focus()},100)};return p}(),k=function(){let e,p=[],s=[],t=!1,x=!1;$("#repeat-back").on("click",function(){$(".repeat-subunit").slideUp(),$("#repeat-daterow").children().each(function(){$(this).css({"background-color":interfaceUtil.gtc("--background-feature")})}),$("#repeat-monthgrid").children().each(function(){$(this).css({"background-color":interfaceUtil.gtc("--background")})}),$("#repeat-toggle-group").slideDown(),$("#repeat-type").fadeOut(()=>$("#repeat-type").html("")),$("#repeat-unit").fadeOut(200),$("#overlay").fadeOut(200),$("#"+activeMenu).addClass("menuitem-selected")}),$("#repeat-advanced-monthly").on("click",function(){t?($(this).html("Advanced..."),$("#repeat-monthgrid").fadeOut(),E.db.modifyTask(C,e,{repeat:{rule:"monthly"}}),$("#repeat-monthgrid").children().each(function(){$(this).css({"background-color":interfaceUtil.gtc("--background")})})):($(this).html("Back to Basic..."),$("#repeat-monthgrid").fadeIn({start:function(){$(this).css({display:"grid"})}})),t=!t}),$("#repeat-advanced-weekly").on("click",function(){x?($(this).html("Advanced..."),$("#repeat-daterow").fadeOut(),E.db.modifyTask(C,e,{repeat:{rule:"weekly"}}),$("#repeat-daterow").children().each(function(){$(this).css({"background-color":interfaceUtil.gtc("--background-feature")})})):($(this).html("Back to Basic..."),$("#repeat-daterow").fadeIn({start:function(){$(this).css({display:"flex"})}})),x=!x}),$(document).on("click","#overlay",function(p){if(p.target===this){$(".repeat-subunit").slideUp(),$("#repeat-toggle-group").slideDown(),$("#repeat-type").fadeOut(()=>$("#repeat-type").html("")),$("#repeat-unit").fadeOut(200),$("#overlay").fadeOut(200,()=>g(!0)),$("#"+activeMenu).addClass("menuitem-selected"),$("#repeat-daterow").children().each(function(){$(this).css({"background-color":interfaceUtil.gtc("--background-feature")})}),$("#repeat-monthgrid").children().each(function(){$(this).css({"background-color":interfaceUtil.gtc("--background")})})}}),$("#repeat-type").on("click",function(){$(".repeat-subunit").slideUp(),$("#repeat-toggle-group").slideDown(),$("#repeat-type").fadeOut(()=>$("#repeat-type").html("")),E.db.modifyTask(C,e,{repeat:{rule:"none"}})}),$("#repeat-perday").on("click",function(){$("#repeat-toggle-group").slideUp(),$("#repeat-type").html("every day."),$("#repeat-type").fadeIn(),E.db.modifyTask(C,e,{repeat:{rule:"daily"}})}),$("#repeat-perweek").on("click",function(){$("#repeat-weekly-unit").slideDown(),$("#repeat-toggle-group").slideUp(),$("#repeat-type").html("every week."),$("#repeat-type").fadeIn(),E.db.modifyTask(C,e,{repeat:{rule:"weekly"}})}),$("#repeat-permonth").on("click",function(){$("#repeat-monthly-unit").slideDown(),$("#repeat-toggle-group").slideUp(),$("#repeat-type").html("every month."),$("#repeat-type").fadeIn(),E.db.modifyTask(C,e,{repeat:{rule:"monthly"}})}),$("#repeat-peryear").on("click",function(){$("#repeat-toggle-group").slideUp(),$("#repeat-type").html("every year."),$("#repeat-type").fadeIn(),E.db.modifyTask(C,e,{repeat:{rule:"yearly"}})}),$(".repeat-daterow-weekname").on("click",function(){p.includes($(this).html())?($(this).animate({"background-color":interfaceUtil.gtc("--background-feature")}),p=p.filter(e=>e!==$(this).html()),E.db.modifyTask(C,e,{repeat:{rule:"weekly",on:p}})):($(this).animate({"background-color":interfaceUtil.gtc("--decorative-light")}),p.push($(this).html()),E.db.modifyTask(C,e,{repeat:{rule:"weekly",on:p}}))}),$(".repeat-monthgrid-day").on("click",function(){s.includes($(this).html())?($(this).animate({"background-color":interfaceUtil.gtc("--background")},100),s=s.filter(e=>e!==$(this).html()),E.db.modifyTask(C,e,{repeat:{rule:"monthly",on:s}})):($(this).animate({"background-color":interfaceUtil.gtc("--background-feature")},100),s.push($(this).html()),E.db.modifyTask(C,e,{repeat:{rule:"monthly",on:s}}))});let l=async function(l){$(".repeat-subunit").hide(),$("#repeat-toggle-group").show(),$("#repeat-type").fadeOut(()=>$("#repeat-type").html("")),$("#perspective-unit").hide(),$("#overlay").fadeIn(200).css("display","flex").hide().fadeIn(200),$("#repeat-unit").fadeIn(200);let a=await E.db.getTaskInformation(C,l);$("#repeat-task-name").html(a.name),e=l,"none"!==a.repeat.rule&&("daily"===a.repeat.rule?($("#repeat-toggle-group").hide(),$("#repeat-type").html("every day."),$("#repeat-type").show()):"weekly"===a.repeat.rule?(a.repeat.on?($("#repeat-daterow").children().each(function(){a.repeat.on.includes($(this).html())&&$(this).animate({"background-color":interfaceUtil.gtc("--decorative-light")})}),p=a.repeat.on,$("#repeat-advanced-weekly").html("Back to Basic..."),$("#repeat-daterow").fadeIn({start:function(){$(this).css({display:"flex"})}}),x=!0):x=!1,$("#repeat-weekly-unit").show(),$("#repeat-toggle-group").hide(),$("#repeat-type").html("every week."),$("#repeat-type").show()):"monthly"===a.repeat.rule?(a.repeat.on?($("#repeat-monthgrid").children().each(function(){a.repeat.on.includes($(this).html())&&$(this).animate({"background-color":interfaceUtil.gtc("--background-feature")})}),s=a.repeat.on,$("#repeat-advanced-monthly").html("Back to Basic..."),$("#repeat-monthgrid").fadeIn({start:function(){$(this).css({display:"grid"})}}),t=!0):t=!1,$("#repeat-monthly-unit").show(),$("#repeat-toggle-group").hide(),$("#repeat-type").html("every month."),$("#repeat-type").show()):"yearly"===a.repeat.rule&&($("#repeat-toggle-group").hide(),$("#repeat-type").html("every year."),$("#repeat-type").show()))};return l}();let m=null,b=!1,f=!1,y=!1,v=function(){let e=async function(){if($("#task-"+m).css({"border-bottom":"0","border-right":"0"}),$("#task-edit-"+m).slideUp(300),$("#task-trash-"+m).css("display","none"),$("#task-repeat-"+m).css("display","none"),$("#task-"+m).animate({"background-color":interfaceUtil.gtc("--background"),padding:"0",margin:"0"},100),$("#task-"+m).css({"border-bottom":"0","border-right":"0","box-shadow":"0 0 0"}),await i(),b){let e=m;iC=o[0].length,0===iC?($("#inbox-subhead").slideUp(300),$("#inbox").slideUp(300)):($("#unsorted-badge").html(""+iC),"today"===activeMenu&&$("#task-"+e).slideUp(200))}else if(f){let e=m;dsC=o[1].length,0===dsC?($("#ds-subhead").slideUp(300),$("#due-soon").slideUp(300)):($("#duesoon-badge").html(""+dsC),"today"===activeMenu&&"inbox"!==$($("#task-"+e).parent()).attr("id")&&$("#task-"+e).slideUp(200))}if(y){let e=m;iC=o[0].length,dsC=o[1].length,$("#unsorted-badge").html(""+iC),$("#duesoon-badge").html(""+dsC),"today"===activeMenu&&$("#task-"+e).appendTo("#inbox")}b=!1,f=!1,y=!1,m=null,j.project.option("disabled",!1),j.inbox.option("disabled",!1),g()},p=async function(p,a,o){let d,c,i=await E.db.getTaskInformation(C,a),u=i.project,m=i.tags,j=i.isFlagged,w=i.isFloating,D=i.name,T=i.desc,I=i.timezone,L=i.repeat;i.defer&&(d=new Date(1e3*i.defer.seconds)),i.due&&(c=new Date(1e3*i.due.seconds));let P=s[u],S=" ",F=function(t,p){if(p||(p=""),pss="<option>"+p+s[t.id]+"</option>",t.children)for(let s of t.children)"project"===s.type&&(pss+=F(s.content,p+"&nbsp;&nbsp;"));return pss};for(let e of r)S+=F(e);let z=function(){let e=[];for(let p in t)e.push(t[p]);return e}(),O="";for(let e in m)O=O+t[m[e]]+",";let q,M;w?(q=d?moment(d).tz(I).local(!0).toDate():void 0,M=c?moment(c).tz(I).local(!0).toDate():void 0):(q=d,M=c);let B=interfaceUtil.gtc("--decorative-light");$("#"+p).append(interfaceUtil.taskHTML(a,D,T,S,B)),$("#task-defer-"+a).datetimepicker({timeInput:!0,timeFormat:"hh:mm tt",showHour:!1,showMinute:!1,onSelect:function(){let e=$(this).datetimepicker("getDate"),p=moment.tz.guess();new Date<e?$("#task-name-"+a).css("opacity","0.3"):$("#task-name-"+a).css("opacity","1"),E.db.modifyTask(C,a,{defer:e,timezone:p}),d=e}}),$("#task-defer-"+a).change(function(p){p.preventDefault()});let U="";$("#task-defer-"+a).keydown(function(p){if(37<=p.keyCode&&40>=p.keyCode);else if(13!=p.keyCode)8==p.keyCode?U=document.getSelection().toString()===this.value?"":U.substring(0,U.length-1):1==p.key.length&&(document.getSelection().toString()===this.value?(p.preventDefault(),$(this).val(p.key)):!p.metaKey&&(p.preventDefault(),$(this).val(this.value+p.key),U=this.value));else if(p.preventDefault(),""===U)$("#task-defer-"+a).val(""),E.db.removeParamFromTask(C,a,"defer"),d=void 0,q=void 0;else{let e=interfaceUtil.spf(U);if(e){defer_set=e.start.date(),$("#task-defer-"+a).datetimepicker("setDate",defer_set);let p=moment.tz.guess();new Date<defer_set?$("#task-name-"+a).css("opacity","0.3"):$("#task-name-"+a).css("opacity","1"),E.db.modifyTask(C,a,{defer:defer_set,timezone:p}),d=defer_set}}}),$("#task-due-"+a).datetimepicker({timeInput:!0,timeFormat:"hh:mm tt",showHour:!1,showMinute:!1,onSelect:function(){let e=$(this).datetimepicker("getDate"),p=moment.tz.guess();new Date>e?($("#task-pseudocheck-"+a).addClass("od"),$("#task-pseudocheck-"+a).removeClass("ds")):1>=interfaceUtil.daysBetween(new Date,e)?($("#task-pseudocheck-"+a).addClass("ds"),$("#task-pseudocheck-"+a).removeClass("od")):(($("#task-pseudocheck-"+a).hasClass("ds")||$("#task-pseudocheck-"+a).hasClass("od"))&&(f=!0),$("#task-pseudocheck-"+a).removeClass("od"),$("#task-pseudocheck-"+a).removeClass("ds")),E.db.modifyTask(C,a,{due:e,timezone:p}),c=e}}),$("#task-due-"+a).change(function(p){p.preventDefault()});let W="";$("#task-due-"+a).keydown(function(p){if(37<=p.keyCode&&40>=p.keyCode);else if(13!=p.keyCode)8==p.keyCode?W=document.getSelection().toString()===this.value?"":W.substring(0,W.length-1):1==p.key.length&&(document.getSelection().toString()===this.value?(p.preventDefault(),$(this).val(p.key)):!p.metaKey&&(p.preventDefault(),$(this).val(this.value+p.key),W=this.value));else if(p.preventDefault(),""===W)($("#task-pseudocheck-"+a).hasClass("ds")||$("#task-pseudocheck-"+a).hasClass("od"))&&(f=!0),$("#task-due-"+a).val(""),E.db.removeParamFromTask(C,a,"due"),$("#task-pseudocheck-"+a).removeClass("od"),$("#task-pseudocheck-"+a).removeClass("ds"),c=void 0,M=void 0;else{let e=interfaceUtil.spf(W);if(e){due_set=e.start.date(),$("#task-due-"+a).datetimepicker("setDate",due_set);let p=moment.tz.guess();new Date>due_set?($("#task-pseudocheck-"+a).addClass("od"),$("#task-pseudocheck-"+a).removeClass("ds")):1>=interfaceUtil.daysBetween(new Date,due_set)?($("#task-pseudocheck-"+a).addClass("ds"),$("#task-pseudocheck-"+a).removeClass("od")):(($("#task-pseudocheck-"+a).hasClass("ds")||$("#task-pseudocheck-"+a).hasClass("od"))&&(f=!0),$("#task-pseudocheck-"+a).removeClass("od"),$("#task-pseudocheck-"+a).removeClass("ds")),E.db.modifyTask(C,a,{due:due_set,timezone:p}),c=due_set}}});let A=async()=>{q&&$("#task-defer-"+a).datetimepicker("setDate",q),M&&$("#task-due-"+a).datetimepicker("setDate",M),n.dateLoaders[a]=()=>{}};n.dateLoaders[a]=A,$("#task-tag-"+a).val(O),$("#task-tag-"+a).tagsinput({typeaheadjs:{name:"tags",source:interfaceUtil.sMatch(z)}}),$("#task-project-"+a).editableSelect({effects:"fade",duration:200,appendTo:"body"}).on("select.editable-select",async function(p,e){let s=e.text().trim(),t=x[s];P===void 0?b=!0:await E.db.dissociateTask(C,a,u),E.db.modifyTask(C,a,{project:t}),u=t,P=s,$("#task-project-"+a).val(P),await E.db.associateTask(C,a,t)}),$("#task-project-"+a).val(P),M&&(new Date>M?$("#task-pseudocheck-"+a).addClass("od"):1>=interfaceUtil.daysBetween(new Date,M)&&$("#task-pseudocheck-"+a).addClass("ds")),q&&new Date<q&&$("#task-name-"+a).css("opacity","0.3"),h[a]||o||$("#task-name-"+a).css("opacity","0.3"),j?$("#task-flagged-yes-"+a).button("toggle"):$("#task-flagged-no-"+a).button("toggle"),w?$("#task-floating-yes-"+a).button("toggle"):$("#task-floating-no-"+a).button("toggle"),$("#task-check-"+a).change(function(){if(this.checked){if(v.hideActiveTask(),$("#task-name-"+a).css("color",interfaceUtil.gtc("--task-checkbox")),$("#task-name-"+a).css("text-decoration","line-through"),$("#task-pseudocheck-"+a).css("opacity","0.6"),$("#task-"+a).animate({margin:"5px 0 5px 0"},200),$("#task-"+a).slideUp(300),E.db.completeTask(C,a).then(function(){void 0===P&&E.db.getInboxTasks(C).then(function(p){iC=p.length,0===iC?($("#inbox-subhead").slideUp(300),$("#inbox").slideUp(300)):$("#unsorted-badge").html(""+iC)})}),"none"!==L.rule&&c){let e=L.rule;if("daily"===e){if(d){let e=c-d;c.setDate(c.getDate()+1),E.db.modifyTask(C,a,{isComplete:!1,due:c,defer:new Date(c-e)})}else c.setDate(c.getDate()+1),E.db.modifyTask(C,a,{isComplete:!1,due:c});}else if("weekly"===e){if(d){let e=L.on,p="",s=c-d;if(e)for(;!e.includes(p);){c.setDate(c.getDate()+1);let e=c.getDay();1===e?p="M":2===e?p="Tu":3===e?p="W":4===e?p="Th":5===e?p="F":6===e?p="Sa":7===e?p="Su":void 0}else c.setDate(c.getDate()+7),d.setDate(d.getDate()+7);E.db.modifyTask(C,a,{isComplete:!1,due:c,defer:new Date(c-s)})}else{let e=L.on;if(e)for(let p="";!e.includes(p);){c.setDate(c.getDate()+1);let e=c.getDay();1===e?p="M":2===e?p="Tu":3===e?p="W":4===e?p="Th":5===e?p="F":6===e?p="Sa":7===e?p="Su":void 0}else c.setDate(c.getDate()+7);E.db.modifyTask(C,a,{isComplete:!1,due:c})}}else if("monthly"===e){if(d){let e=L.on,p=c.getDate(),s=c.getDate(),t=c-d;if(e)for(;!e.includes(p.toString())&&!(e.includes("Last")&&new Date(c.getFullYear(),c.getMonth(),c.getDate()).getDate()===new Date(c.getFullYear(),c.getMonth()+1,0).getDate())||s===p;)c.setDate(c.getDate()+1),p=c.getDate();else c.setMonth(c.getMonth()+1);E.db.modifyTask(C,a,{isComplete:!1,due:c,defer:new Date(c-t)})}else{let e=L.on;if(e){let p=c.getDate(),s=c.getDate();for(;!e.includes(p.toString())&&!(e.includes("Last")&&new Date(c.getFullYear(),c.getMonth(),c.getDate()).getDate()===new Date(c.getFullYear(),c.getMonth()+1,0).getDate())||s===p;)c.setDate(c.getDate()+1),p=c.getDate()}else c.setMonth(c.getMonth()+1);E.db.modifyTask(C,a,{isComplete:!1,due:c})}}else if("yearly"===e)if(d){let e=c-d;c.setFullYear(c.getFullYear()+1),E.db.modifyTask(C,a,{isComplete:!1,due:c,defer:new Date(c-e)})}else c.setFullYear(c.getFullYear()+1),E.db.modifyTask(C,a,{isComplete:!1,due:c})}g()}}),$("#task-project-"+a).change(async function(){if(this.value in x){let e=x[this.value];P===void 0?b=!0:await E.db.dissociateTask(C,a,u),E.db.modifyTask(C,a,{project:e}),await E.db.associateTask(C,a,e),u=e,P=this.value}else E.db.modifyTask(C,a,{project:""}),this.value="",void 0!==P&&(y=!0,await E.db.dissociateTask(C,a,u)),P=void 0,u=""}),$("#task-trash-"+a).click(function(){P===void 0&&(b=!0),E.db.deleteTask(C,a).then(function(){e(),$("#task-"+a).slideUp(150),g(!0)})}),$("#task-repeat-"+a).click(function(){k(a)}),$("#task-name-"+a).change(function(){E.db.modifyTask(C,a,{name:this.value})}),$("#task-desc-"+a).change(function(){E.db.modifyTask(C,a,{desc:this.value})}),$("#task-tag-"+a).on("itemRemoved",function(p){let e=l[p.item];m=m.filter(p=>p!==e),E.db.modifyTask(C,a,{tags:m})}),$("#task-tag-"+a).on("itemAdded",function(p){let e=l[p.item];e?!(e in m)&&(m.push(e),E.db.modifyTask(C,a,{tags:m})):E.db.newTag(C,p.item).then(function(e){m.push(e),t[e]=p.item,t[p.item]=e,E.db.modifyTask(C,a,{tags:m})})}),$("#task-flagged-no-"+a).change(function(){j=!1,E.db.modifyTask(C,a,{isFlagged:!1})}),$("#task-flagged-yes-"+a).change(function(){j=!0,E.db.modifyTask(C,a,{isFlagged:!0})}),$("#task-floating-no-"+a).change(function(){w=!1,E.db.modifyTask(C,a,{isFloating:!1}),q=d,M=c,A()}),$("#task-floating-yes-"+a).change(function(){w=!0,E.db.modifyTask(C,a,{isFloating:!0}),q=moment(d).tz(I).local(!0).toDate(),M=moment(c).tz(I).local(!0).toDate(),A()})};return{generateTaskInterface:p,hideActiveTask:e}}(),j=function(){let e=new interfaceUtil.Sortable($("#inbox")[0],{animation:200,swapThreshold:.1,onStart:function(p){let e=$(p.item);$("#inbox").children().each(function(){$(this)!==e&&$(this).removeClass("thov")}),n.interfaceLocks.reloadLock=!0},onEnd:function(p){let e=p.oldIndex,s=p.newIndex;i().then(function(){if(e<s){for(let p=e+1;p<=s;p++)E.db.modifyTask(C,o[0][p],{order:p-1});E.db.modifyTask(C,o[0][e],{order:s})}else if(e>s){for(let p=e-1;p>=s;p--)E.db.modifyTask(C,o[0][p],{order:p+1});E.db.modifyTask(C,o[0][e],{order:s})}}),$("#inbox").children().addClass("thov"),n.interfaceLocks.reloadLock=!1}}),p=new interfaceUtil.Sortable($("#project-content")[0],{animation:200,swapThreshold:.1,onStart:function(p){let e=$(p.item);$("#project-content").children().each(function(){$(this)!==e&&$(this).removeClass("thov")}),n.interfaceLocks.reloadLock=!0},onEnd:function(p){let e=p.oldIndex,s=p.newIndex;E.db.getProjectStructure(C,n.pageContentID).then(async function(p){if(e<s){for(let t,x=e+1;x<=s;x++)if(t=p.children[x],"task"===t.type){let e=t.content;E.db.modifyTask(C,e,{order:x-1})}else if("project"===t.type){let e=t.content.id;E.db.modifyProject(C,e,{order:x-1})}let t=p.children[e];if("task"===t.type){let e=t.content;E.db.modifyTask(C,e,{order:s})}else if("project"===t.type){let e=t.content.id;E.db.modifyProject(C,e,{order:s})}}else if(e>s){for(let t,x=e-1;x>=s;x--)if(t=p.children[x],"task"===t.type){let e=t.content;E.db.modifyTask(C,e,{order:x+1})}else if("project"===t.type){let e=t.content.id;E.db.modifyProject(C,e,{order:x+1})}let t=p.children[e];if("task"===t.type){let e=t.content;E.db.modifyTask(C,e,{order:s})}else if("project"===t.type){let e=t.content.id;E.db.modifyProject(C,e,{order:s})}}}),$("#project-content").children().addClass("thov"),n.interfaceLocks.reloadLock=!1}});var s=new interfaceUtil.Sortable($(".perspectives")[0],{animation:200,onStart:function(p){let e=$(p.item);$(".perspectives").children().each(function(){$(this)!==e&&$(this).removeClass("mihov")}),n.interfaceLocks.reloadLock=!0},onEnd:function(p){let e=p.oldIndex,s=p.newIndex,t=[];E.db.getPerspectives(C).then(function(p){let x=p[2].map(e=>e.id);if(e<s){for(let p=e+1;p<=s;p++)t.push(E.db.modifyPerspective(C,x[p],{order:p-1}));t.push(E.db.modifyPerspective(C,x[e],{order:s}))}else if(e>s){for(let p=e-1;p>=s;p--)t.push(E.db.modifyPerspective(C,x[p],{order:p+1}));t.push(E.db.modifyPerspective(C,x[e],{order:s}))}Promise.all(t).then(L),n.interfaceLocks.reloadLock=!1})}});let t=new interfaceUtil.Sortable($(".projects")[0],{animation:200,swapThreshold:.1,onStart:function(p){let e=$(p.item);$(".projects").children().each(function(){$(this)!==e&&$(this).removeClass("mihov")}),n.interfaceLocks.reloadLock=!0},onEnd:function(p){let e=p.oldIndex,s=p.newIndex,t=[];E.db.getTopLevelProjects(C).then(function(p){let x=p[2].map(e=>e.id);if(e<s){for(let p=e+1;p<=s;p++)t.push(E.db.modifyProject(C,x[p],{order:p-1}));t.push(E.db.modifyProject(C,x[e],{order:s}))}else if(e>s){for(let p=e-1;p>=s;p--)t.push(E.db.modifyProject(C,x[p],{order:p+1}));t.push(E.db.modifyProject(C,x[e],{order:s}))}Promise.all(t).then(L),n.interfaceLocks.reloadLock=!1})}});return{inbox:e,project:p,menuProject:t,menuPerspective:s}}(),w=function(){let p=async function(){$("#greeting-date").html(new Date().toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),$("#greeting").html(c),$("#greeting-name").html(I),$("#blankimage-today").css("opacity","0.0"),$("#blankimage-today").css("display",0==o[0].length+o[1].length?"flex":"none"),$("#blankimage-today").animate({opacity:"0.2"}),Promise.all(o[0].map(e=>v.generateTaskInterface("inbox",e)),o[1].map(e=>v.generateTaskInterface("due-soon",e))).then(function(){0===o[0].length?($("#inbox-subhead").hide(),$("#inbox").hide()):($("#inbox-subhead").show(),$("#inbox").show(),$("#unsorted-badge").html(""+o[0].length)),0===o[1].length?($("#ds-subhead").hide(),$("#due-soon").hide()):($("#ds-subhead").show(),$("#due-soon").show(),$("#duesoon-badge").html(""+o[1].length))})},t=async function(e){n.pageContentID=e;let p=a[0][e];$("#perspective-title").val(p.name),E.perspective.calc(C,p.query,p.avail,p.tord).then(async function(e){$("#blankimage-perspective").css("opacity","0.0"),$("#blankimage-perspective").css("display",0==e.length?"flex":"none"),$("#blankimage-perspective").animate({opacity:"0.2"});for(let p of e)await v.generateTaskInterface("perspective-content",p)})},x=async function(p){n.pageContentID=p;let t=e[0][0][p];$("#project-title").val(t),1>=n.projectDir.length?$("#project-back").hide():$("#project-back").show(),E.db.getProjectStructure(C,p).then(async function(e){$("#blankimage-project").css("opacity","0.0"),$("#blankimage-project").css("display",0==e.children.length?"flex":"none"),$("#blankimage-project").animate({opacity:"0.2"});for(let p of e.children)if("task"===p.type){let e=p.content;await v.generateTaskInterface("project-content",e)}else if("project"===p.type){let e=p.content.id,t=s[e];$("#project-content").append(`<div id="project-${e}" class="menuitem project subproject sbpro"><i class="far fa-arrow-alt-circle-right subproject-icon"></i><t style="padding-left:18px">${t}</t></div>`),h[e]||$("#project-"+e).css("opacity","0.3")}e.is_sequential?$("#project-sequential-yes").button("toggle"):$("#project-sequential-no").button("toggle")})};return{upcoming:p,project:x,perspective:t}}(),D=async function(e,p){$("#content-area").children().each(function(){$(this).attr("id")!=e&&$(this).css("display","none")}),$("#inbox").empty(),$("#due-soon").empty(),$("#project-content").empty(),$("#perspective-content").empty(),await i(),n.pageLocks=[];"upcoming-page"===e?w.upcoming():"perspective-page"===e?w.perspective(p):"project-page"===e?w.project(p):void 0;$("#"+e).show(),n.currentView=e};$(document).on("click",".menuitem",function(){interfaceUtil.newPHI(),$("#"+activeMenu).removeClass("today-highlighted menuitem-selected"),activeMenu=$(this).attr("id"),activeMenu.includes("perspective")?(D("perspective-page",activeMenu.split("-")[1]),$("#"+activeMenu).addClass("menuitem-selected")):activeMenu.includes("perspective")?($("#"+activeMenu).addClass("menuitem-selected"),D("perspective-page",activeMenu.split("-")[1])):activeMenu.includes("project")&&(!$(this).hasClass("subproject")&&(n.projectDir=[]),$("#"+activeMenu).addClass("menuitem-selected"),n.projectDir.push(activeMenu),D("project-page",activeMenu.split("-")[1]))}),$(document).on("click",".today",function(){interfaceUtil.newPHI(),$("#"+activeMenu).removeClass("today-highlighted menuitem-selected"),D("upcoming-page"),activeMenu=$(this).attr("id"),$("#"+activeMenu).addClass("today-highlighted")}),$(document).on("click",".task",async function(p){if($(this).attr("id")==="task-"+m)return void p.stopImmediatePropagation();if(m&&(await v.hideActiveTask()),$(p.target).hasClass("task-pseudocheck")||$(p.target).hasClass("task-check"))return void p.stopImmediatePropagation();else{let e=$(this).attr("id").split("-"),p=e[e.length-1];m=p,$("#task-"+p).animate({"background-color":interfaceUtil.gtc("--task-feature"),padding:"10px",margin:"15px 0 30px 0"},300),$("#task-edit-"+m).slideDown(200),$("#task-trash-"+m).css("display","block"),$("#task-repeat-"+m).css("display","block"),$("#task-"+p).css({"box-shadow":"1px 1px 5px "+interfaceUtil.gtc("--background-feature")}),n.dateLoaders[m](),j.project.option("disabled",!0),j.inbox.option("disabled",!0)}}),$(document).on("click",".page, #left-menu div",function(p){if(m){if($(p.target).hasClass("task-pseudocheck"))$("#task-check-"+m).toggle();else if($(p.target).hasClass("task")||$(p.target).hasClass("task-name")||$(p.target).hasClass("task-display"))return!1;v.hideActiveTask()}}),$(document).on("click","#project-back",function(){n.projectDir.pop(),activeMenu=n.projectDir[n.projectDir.length-1],D("project-page",activeMenu.split("-")[1]),$("#"+activeMenu).addClass("menuitem-selected")}),$(document).on("click","#new-project",function(){if(n.interfaceLocks.nprojLock)return;n.interfaceLocks.nprojLock=!0,setTimeout(()=>{n.interfaceLocks.nprojLock=!1},1e3);let e=n.projectDir[n.projectDir.length-1].split("-")[1];E.db.newProject(C,{name:"New Project",top_level:!1,is_sequential:!1},e).then(function(p){interfaceUtil.newPHI(),E.db.associateProject(C,p,e),$("#"+activeMenu).removeClass("today-highlighted menuitem-selected"),activeMenu="project-"+p,n.projectDir.push(activeMenu),D("project-page",p).then(()=>setTimeout(function(){$("#project-title").focus(),$("#project-title").select()},100)),$("#"+activeMenu).addClass("menuitem-selected")})}),$(document).on("click","#perspective-add",function(){if(!n.interfaceLocks.npspLock){n.interfaceLocks.npspLock=!0,setTimeout(()=>{n.interfaceLocks.npspLock=!1},1e3);E.db.newPerspective(C,{name:"",query:""}).then(function(e){$("#"+activeMenu).removeClass("today-highlighted menuitem-selected"),activeMenu="perspective-"+e,$(".perspectives").append(`<div id="perspective-${e}" class="menuitem perspective mihov"><i class="fa fa-layer-group"></i><t style="padding-left:8px"></t></div>`),D("perspective-page",e).then(async function(){await i(),u(e),setTimeout(function(){$("#perspective-edit-name").focus(),$("#perspective-edit-name").select()},500)}),$("#"+activeMenu).addClass("menuitem-selected")})}}),$(document).on("click","#project-add-toplevel",function(){if(interfaceUtil.newPHI(),!n.interfaceLocks.nprojLock){n.interfaceLocks.nprojLock=!0,setTimeout(()=>{n.interfaceLocks.nprojLock=!1},1e3);E.db.newProject(C,{name:"New Project",top_level:!0,is_sequential:!1}).then(function(e){$("#"+activeMenu).removeClass("today-highlighted menuitem-selected"),activeMenu="project-"+e,n.projectDir=[activeMenu],$(".projects").append(`<div id="project-${e}" class="menuitem project mihov"><i class="fas fa-project-diagram"></i><t style="padding-left:8px; text-overflow: ellipsis; overflow: hidden">New Project</t></div>`),D("project-page",e).then(function(){setTimeout(function(){$("#project-title").focus(),$("#project-title").select()},100)}),$("#"+activeMenu).addClass("menuitem-selected")})}}),$(document).on("click","#perspective-trash",function(){let e=n.pageContentID;$("#"+activeMenu).removeClass("menuitem-selected"),D("upcoming-page"),activeMenu="today",$("#today").addClass("menuitem-selected"),$("#perspective-"+e).remove(),E.db.deletePerspective(C,e)}),$(document).on("click","#project-trash",function(){let e=n.projectDir[n.projectDir.length-1].split("-")[1],p=!(1!==n.projectDir.length);E.db.deleteProject(C,e).then(function(){n.projectDir.pop(),interfaceUtil.newPHI(),0<n.projectDir.length?E.db.dissociateProject(C,e,n.projectDir[n.projectDir.length-1].split("-")[1]).then(function(){activeMenu=n.projectDir[n.projectDir.length-1],D("project-page",n.projectDir[n.projectDir.length-1].split("-")[1])}):(activeMenu="today",$("#today").addClass("menuitem-selected"),D("upcoming-page"),$("#project-"+e).remove())})}),$(document).on("click","#new-task",function(){if(n.interfaceLocks.ntLock)return;n.interfaceLocks.ntLock=!0,setTimeout(()=>{n.interfaceLocks.ntLock=!1},1e3);let e=n.projectDir[n.projectDir.length-1].split("-")[1],p={desc:"",isFlagged:!1,isFloating:!1,isComplete:!1,project:e,tags:[],timezone:moment.tz.guess(),repeat:{rule:"none"},name:""};E.db.newTask(C,p).then(function(p){E.db.associateTask(C,p,e),v.generateTaskInterface("project-content",p,!0).then(function(){let e=p;m=e,$("#task-"+e).animate({"background-color":interfaceUtil.gtc("--task-feature"),padding:"10px",margin:"15px 0 30px 0"},300),$("#task-edit-"+m).slideDown(200),$("#task-trash-"+m).css("display","block"),$("#task-repeat-"+m).css("display","block"),$("#task-"+e).css({"box-shadow":"1px 1px 5px "+interfaceUtil.gtc("--background-feature")}),$("#task-name-"+e).focus(),$("#blankimage-project").hide(),j.project.option("disabled",!0),j.inbox.option("disabled",!0)})})}),$(document).on("change","#project-title",function(){let e=n.projectDir[n.projectDir.length-1].split("-")[1],p=$(this).val();E.db.modifyProject(C,e,{name:p}),g(!0)}),$(document).on("change","#perspective-title",function(){let e=n.pageContentID,p=$(this).val();E.db.modifyPerspective(C,e,{name:p}),g(!0)}),$(document).on("click","#project-sequential-yes",function(){let e=n.projectDir[n.projectDir.length-1].split("-")[1];E.db.modifyProject(C,e,{is_sequential:!0}).then(function(){g(!0)})}),$(document).on("click","#project-sequential-no",function(){let e=n.projectDir[n.projectDir.length-1].split("-")[1];E.db.modifyProject(C,e,{is_sequential:!1}).then(function(){g(!0)})}),$(document).on("click","#logout",function(){firebase.auth().signOut().then(()=>{},console.error)}),$(document).on("click","#perspective-edit",function(){u(n.pageContentID)}),$("#quickadd").click(function(){$(this).animate({width:"350px"},500)}),$("#quickadd").blur(function(){$(this).val(""),$(this).animate({width:"250px"},500)}),$("#quickadd").keydown(function(p){if(13==p.keyCode){if(n.interfaceLocks.qaLock)return;n.interfaceLocks.qaLock=!0;let p=$(this);p.animate({"background-color":interfaceUtil.gtc("--quickadd-success"),color:interfaceUtil.gtc("--quickadd-success-text")},function(){setTimeout(()=>n.interfaceLocks.qaLock=!1,750);let e,s=chrono.parse($(this).val()),t=moment.tz.guess(),x={desc:"",isFlagged:!1,isFloating:!1,isComplete:!1,project:"",tags:[],timezone:t,repeat:{rule:"none"}};if(0!=s.length){let t=s[0].start;t&&(e=t.date(),x.due=e,x.name=p.val().replace(s[0].text,""))}else x.name=p.val();E.db.newTask(C,x).then(function(e){i().then(function(){v.generateTaskInterface("inbox",e)}),E.db.getInboxTasks(C).then(function(s){iC=s.length,$("#unsorted-badge").html(""+iC),$("#inbox-subhead").slideDown(300),$("#inbox").slideDown(300),p.animate({"background-color":interfaceUtil.gtc("--quickadd"),color:interfaceUtil.gtc("--quickadd-text")},100,function(){p.blur(),p.val("")}),$("#blankimage-today").css("display","none")})})})}else 27==p.keyCode&&$(this).blur()}),$(document).on("drop",".project",function(p){let e=p.originalEvent.dataTransfer.getData("text").split("-"),s=this.id.split("-");e[1]===s[1]||("task"===e[0]?async function(){let p=await E.db.getTaskInformation(C,e[1]);if(""!==p.project){if(p.project===s[1])return;await E.db.dissociateTask(C,e[1],p.project)}await E.db.modifyTask(C,e[1],{project:s[1]}),await E.db.associateTask(C,e[1],s[1]),$("#task-"+e[1]).slideUp(),g(!0)}():"project"===e[0]&&async function(){let p=await E.db.getProjectStructure(C,e[1]);if(""!==p.parentProj){if(p.parentProj===s[1])return;await E.db.dissociateProject(C,e[1],p.parentProj)}await E.db.modifyProject(C,e[1],{parent:s[1],top_level:!1}),await E.db.associateProject(C,e[1],s[1]),$("#project-"+e[1]).slideUp(),g(!0)}())}),$(document).on("dragenter",".project",function(){$(this).animate({"background-color":interfaceUtil.gtc("--menu-accent-background")},100)}),$(document).on("dragleave",".project",function(){$(this).animate({"background-color":"transparent"},100)}),$(document).on("dragstart",".project",function(p){p.originalEvent.dataTransfer.setData("text",p.target.id)}),$(document).on("dragstart",".task",function(p){p.originalEvent.dataTransfer.setData("text",p.target.id)}),$(document).on("click","#perspective-documentaion",function(){require("electron").shell.openExternal("https://condutiondocs.shabang.cf/Perspective-Menus-408aae7988a345c0912644267ccda4d2")}),interfaceUtil.newPHI();let T,C,I,L=async function(){let e=await E.db.getTopLevelProjects(C),p=await E.db.getProjectsandTags(C);$(".projects").empty(),$(".perspectives").empty();for(let p of e[2])$(".projects").append(`<div id="project-${p.id}" class="menuitem project mihov"><i class="fas fa-project-diagram"></i><t style="padding-left:8px; text-overflow: ellipsis; overflow: hidden">${p.name}</t></div>`);let s=await E.db.getPerspectives(C);for(let e of s[2])$(".perspectives").append(`<div id="perspective-${e.id}" class="menuitem perspective mihov"><i class="fa fa-layer-group"></i><t style="padding-left:8px">${e.name}</t></div>`)};return{user:{set:function(e){T=e,C=e.uid,I=e.displayName,T=e},get:()=>T},load:D,update:g,constructSidebar:L}}();$(document).ready(async function(){firebase.auth().onAuthStateChanged(async function(e){if(!e)firebase.auth().signOut(),window.location.replace("auth.html");else if(e.emailVerified){Date.now();ui.user.set(e),await ui.constructSidebar(),await ui.load("upcoming-page"),$("#loading").fadeOut(),$("#content-wrapper").fadeIn(),setInterval(()=>{ui.update(),ipcRenderer.send("updatecheck")},60000)}else window.location.replace("auth.html")})}),console.log("%cSTOP! ","background: #fff0f0; color: #434d5f; font-size: 80px"),console.log("%cClose this panel now.","background: #fff0f0;color: black;text-shadow: -1px -1px hsl(0,100%,50%), 1px 1px hsl(5.4, 100%, 50%), 3px 2px hsl(10.8, 100%, 50%), 5px 3px hsl(16.2, 100%, 50%), 7px 4px hsl(21.6, 100%, 50%), 9px 5px hsl(27, 100%, 50%), 11px 6px hsl(32.4, 100%, 50%), 13px 7px hsl(37.8, 100%, 50%), 14px 8px hsl(43.2, 100%, 50%), 16px 9px hsl(48.6, 100%, 50%), 18px 10px hsl(54, 100%, 50%), 20px 11px hsl(59.4, 100%, 50%), 22px 12px hsl(64.8, 100%, 50%), 23px 13px hsl(70.2, 100%, 50%), 25px 14px hsl(75.6, 100%, 50%), 27px 15px hsl(81, 100%, 50%), 28px 16px hsl(86.4, 100%, 50%), 30px 17px hsl(91.8, 100%, 50%), 32px 18px hsl(97.2, 100%, 50%), 33px 19px hsl(102.6, 100%, 50%), 35px 20px hsl(108, 100%, 50%), 36px 21px hsl(113.4, 100%, 50%), 38px 22px hsl(118.8, 100%, 50%), 39px 23px hsl(124.2, 100%, 50%), 41px 24px hsl(129.6, 100%, 50%), 42px 25px hsl(135, 100%, 50%), 43px 26px hsl(140.4, 100%, 50%), 45px 27px hsl(145.8, 100%, 50%), 46px 28px hsl(151.2, 100%, 50%), 47px 29px hsl(156.6, 100%, 50%), 48px 30px hsl(162, 100%, 50%), 49px 31px hsl(167.4, 100%, 50%), 50px 32px hsl(172.8, 100%, 50%), 51px 33px hsl(178.2, 100%, 50%), 52px 34px hsl(183.6, 100%, 50%), 53px 35px hsl(189, 100%, 50%), 54px 36px hsl(194.4, 100%, 50%), 55px 37px hsl(199.8, 100%, 50%), 55px 38px hsl(205.2, 100%, 50%), 56px 39px hsl(210.6, 100%, 50%), 57px 40px hsl(216, 100%, 50%), 57px 41px hsl(221.4, 100%, 50%), 58px 42px hsl(226.8, 100%, 50%), 58px 43px hsl(232.2, 100%, 50%), 58px 44px hsl(237.6, 100%, 50%), 59px 45px hsl(243, 100%, 50%), 59px 46px hsl(248.4, 100%, 50%), 59px 47px hsl(253.8, 100%, 50%), 59px 48px hsl(259.2, 100%, 50%), 59px 49px hsl(264.6, 100%, 50%), 60px 50px hsl(270, 100%, 50%), 59px 51px hsl(275.4, 100%, 50%), 59px 52px hsl(280.8, 100%, 50%), 59px 53px hsl(286.2, 100%, 50%), 59px 54px hsl(291.6, 100%, 50%), 59px 55px hsl(297, 100%, 50%), 58px 56px hsl(302.4, 100%, 50%), 58px 57px hsl(307.8, 100%, 50%), 58px 58px hsl(313.2, 100%, 50%), 57px 59px hsl(318.6, 100%, 50%), 57px 60px hsl(324, 100%, 50%), 56px 61px hsl(329.4, 100%, 50%), 55px 62px hsl(334.8, 100%, 50%), 55px 63px hsl(340.2, 100%, 50%), 54px 64px hsl(345.6, 100%, 50%), 53px 65px hsl(351, 100%, 50%), 52px 66px hsl(356.4, 100%, 50%), 51px 67px hsl(361.8, 100%, 50%), 50px 68px hsl(367.2, 100%, 50%), 49px 69px hsl(372.6, 100%, 50%), 48px 70px hsl(378, 100%, 50%), 47px 71px hsl(383.4, 100%, 50%), 46px 72px hsl(388.8, 100%, 50%), 45px 73px hsl(394.2, 100%, 50%), 43px 74px hsl(399.6, 100%, 50%), 42px 75px hsl(405, 100%, 50%), 41px 76px hsl(410.4, 100%, 50%), 39px 77px hsl(415.8, 100%, 50%), 38px 78px hsl(421.2, 100%, 50%), 36px 79px hsl(426.6, 100%, 50%), 35px 80px hsl(432, 100%, 50%), 33px 81px hsl(437.4, 100%, 50%), 32px 82px hsl(442.8, 100%, 50%), 30px 83px hsl(448.2, 100%, 50%), 28px 84px hsl(453.6, 100%, 50%), 27px 85px hsl(459, 100%, 50%), 25px 86px hsl(464.4, 100%, 50%), 23px 87px hsl(469.8, 100%, 50%), 22px 88px hsl(475.2, 100%, 50%), 20px 89px hsl(480.6, 100%, 50%), 18px 90px hsl(486, 100%, 50%), 16px 91px hsl(491.4, 100%, 50%), 14px 92px hsl(496.8, 100%, 50%), 13px 93px hsl(502.2, 100%, 50%), 11px 94px hsl(507.6, 100%, 50%), 9px 95px hsl(513, 100%, 50%), 7px 96px hsl(518.4, 100%, 50%), 5px 97px hsl(523.8, 100%, 50%), 3px 98px hsl(529.2, 100%, 50%), 1px 99px hsl(534.6, 100%, 50%), 7px 100px hsl(540, 100%, 50%), -1px 101px hsl(545.4, 100%, 50%), -3px 102px hsl(550.8, 100%, 50%), -5px 103px hsl(556.2, 100%, 50%), -7px 104px hsl(561.6, 100%, 50%), -9px 105px hsl(567, 100%, 50%), -11px 106px hsl(572.4, 100%, 50%), -13px 107px hsl(577.8, 100%, 50%), -14px 108px hsl(583.2, 100%, 50%), -16px 109px hsl(588.6, 100%, 50%), -18px 110px hsl(594, 100%, 50%), -20px 111px hsl(599.4, 100%, 50%), -22px 112px hsl(604.8, 100%, 50%), -23px 113px hsl(610.2, 100%, 50%), -25px 114px hsl(615.6, 100%, 50%), -27px 115px hsl(621, 100%, 50%), -28px 116px hsl(626.4, 100%, 50%), -30px 117px hsl(631.8, 100%, 50%), -32px 118px hsl(637.2, 100%, 50%), -33px 119px hsl(642.6, 100%, 50%), -35px 120px hsl(648, 100%, 50%), -36px 121px hsl(653.4, 100%, 50%), -38px 122px hsl(658.8, 100%, 50%), -39px 123px hsl(664.2, 100%, 50%), -41px 124px hsl(669.6, 100%, 50%), -42px 125px hsl(675, 100%, 50%), -43px 126px hsl(680.4, 100%, 50%), -45px 127px hsl(685.8, 100%, 50%), -46px 128px hsl(691.2, 100%, 50%), -47px 129px hsl(696.6, 100%, 50%), -48px 130px hsl(702, 100%, 50%), -49px 131px hsl(707.4, 100%, 50%), -50px 132px hsl(712.8, 100%, 50%), -51px 133px hsl(718.2, 100%, 50%), -52px 134px hsl(723.6, 100%, 50%), -53px 135px hsl(729, 100%, 50%), -54px 136px hsl(734.4, 100%, 50%), -55px 137px hsl(739.8, 100%, 50%), -55px 138px hsl(745.2, 100%, 50%), -56px 139px hsl(750.6, 100%, 50%), -57px 140px hsl(756, 100%, 50%), -57px 141px hsl(761.4, 100%, 50%), -58px 142px hsl(766.8, 100%, 50%), -58px 143px hsl(772.2, 100%, 50%), -58px 144px hsl(777.6, 100%, 50%), -59px 145px hsl(783, 100%, 50%), -59px 146px hsl(788.4, 100%, 50%), -59px 147px hsl(793.8, 100%, 50%), -59px 148px hsl(799.2, 100%, 50%), -59px 149px hsl(804.6, 100%, 50%), -60px 150px hsl(810, 100%, 50%), -59px 151px hsl(815.4, 100%, 50%), -59px 152px hsl(820.8, 100%, 50%), -59px 153px hsl(826.2, 100%, 50%), -59px 154px hsl(831.6, 100%, 50%), -59px 155px hsl(837, 100%, 50%), -58px 156px hsl(842.4, 100%, 50%), -58px 157px hsl(847.8, 100%, 50%), -58px 158px hsl(853.2, 100%, 50%), -57px 159px hsl(858.6, 100%, 50%), -57px 160px hsl(864, 100%, 50%), -56px 161px hsl(869.4, 100%, 50%), -55px 162px hsl(874.8, 100%, 50%), -55px 163px hsl(880.2, 100%, 50%), -54px 164px hsl(885.6, 100%, 50%), -53px 165px hsl(891, 100%, 50%), -52px 166px hsl(896.4, 100%, 50%), -51px 167px hsl(901.8, 100%, 50%), -50px 168px hsl(907.2, 100%, 50%), -49px 169px hsl(912.6, 100%, 50%), -48px 170px hsl(918, 100%, 50%), -47px 171px hsl(923.4, 100%, 50%), -46px 172px hsl(928.8, 100%, 50%), -45px 173px hsl(934.2, 100%, 50%), -43px 174px hsl(939.6, 100%, 50%), -42px 175px hsl(945, 100%, 50%), -41px 176px hsl(950.4, 100%, 50%), -39px 177px hsl(955.8, 100%, 50%), -38px 178px hsl(961.2, 100%, 50%), -36px 179px hsl(966.6, 100%, 50%), -35px 180px hsl(972, 100%, 50%), -33px 181px hsl(977.4, 100%, 50%), -32px 182px hsl(982.8, 100%, 50%), -30px 183px hsl(988.2, 100%, 50%), -28px 184px hsl(993.6, 100%, 50%), -27px 185px hsl(999, 100%, 50%), -25px 186px hsl(1004.4, 100%, 50%), -23px 187px hsl(1009.8, 100%, 50%), -22px 188px hsl(1015.2, 100%, 50%), -20px 189px hsl(1020.6, 100%, 50%), -18px 190px hsl(1026, 100%, 50%), -16px 191px hsl(1031.4, 100%, 50%), -14px 192px hsl(1036.8, 100%, 50%), -13px 193px hsl(1042.2, 100%, 50%), -11px 194px hsl(1047.6, 100%, 50%), -9px 195px hsl(1053, 100%, 50%), -7px 196px hsl(1058.4, 100%, 50%), -5px 197px hsl(1063.8, 100%, 50%), -3px 198px hsl(1069.2, 100%, 50%), -1px 199px hsl(1074.6, 100%, 50%), -1px 200px hsl(1080, 100%, 50%), 1px 201px hsl(1085.4, 100%, 50%), 3px 202px hsl(1090.8, 100%, 50%), 5px 203px hsl(1096.2, 100%, 50%), 7px 204px hsl(1101.6, 100%, 50%), 9px 205px hsl(1107, 100%, 50%), 11px 206px hsl(1112.4, 100%, 50%), 13px 207px hsl(1117.8, 100%, 50%), 14px 208px hsl(1123.2, 100%, 50%), 16px 209px hsl(1128.6, 100%, 50%), 18px 210px hsl(1134, 100%, 50%), 20px 211px hsl(1139.4, 100%, 50%), 22px 212px hsl(1144.8, 100%, 50%), 23px 213px hsl(1150.2, 100%, 50%), 25px 214px hsl(1155.6, 100%, 50%), 27px 215px hsl(1161, 100%, 50%), 28px 216px hsl(1166.4, 100%, 50%), 30px 217px hsl(1171.8, 100%, 50%), 32px 218px hsl(1177.2, 100%, 50%), 33px 219px hsl(1182.6, 100%, 50%), 35px 220px hsl(1188, 100%, 50%), 36px 221px hsl(1193.4, 100%, 50%), 38px 222px hsl(1198.8, 100%, 50%), 39px 223px hsl(1204.2, 100%, 50%), 41px 224px hsl(1209.6, 100%, 50%), 42px 225px hsl(1215, 100%, 50%), 43px 226px hsl(1220.4, 100%, 50%), 45px 227px hsl(1225.8, 100%, 50%), 46px 228px hsl(1231.2, 100%, 50%), 47px 229px hsl(1236.6, 100%, 50%), 48px 230px hsl(1242, 100%, 50%), 49px 231px hsl(1247.4, 100%, 50%), 50px 232px hsl(1252.8, 100%, 50%), 51px 233px hsl(1258.2, 100%, 50%), 52px 234px hsl(1263.6, 100%, 50%), 53px 235px hsl(1269, 100%, 50%), 54px 236px hsl(1274.4, 100%, 50%), 55px 237px hsl(1279.8, 100%, 50%), 55px 238px hsl(1285.2, 100%, 50%), 56px 239px hsl(1290.6, 100%, 50%), 57px 240px hsl(1296, 100%, 50%), 57px 241px hsl(1301.4, 100%, 50%), 58px 242px hsl(1306.8, 100%, 50%), 58px 243px hsl(1312.2, 100%, 50%), 58px 244px hsl(1317.6, 100%, 50%), 59px 245px hsl(1323, 100%, 50%), 59px 246px hsl(1328.4, 100%, 50%), 59px 247px hsl(1333.8, 100%, 50%), 59px 248px hsl(1339.2, 100%, 50%), 59px 249px hsl(1344.6, 100%, 50%), 60px 250px hsl(1350, 100%, 50%), 59px 251px hsl(1355.4, 100%, 50%), 59px 252px hsl(1360.8, 100%, 50%), 59px 253px hsl(1366.2, 100%, 50%), 59px 254px hsl(1371.6, 100%, 50%), 59px 255px hsl(1377, 100%, 50%), 58px 256px hsl(1382.4, 100%, 50%), 58px 257px hsl(1387.8, 100%, 50%), 58px 258px hsl(1393.2, 100%, 50%), 57px 259px hsl(1398.6, 100%, 50%), 57px 260px hsl(1404, 100%, 50%), 56px 261px hsl(1409.4, 100%, 50%), 55px 262px hsl(1414.8, 100%, 50%), 55px 263px hsl(1420.2, 100%, 50%), 54px 264px hsl(1425.6, 100%, 50%), 53px 265px hsl(1431, 100%, 50%), 52px 266px hsl(1436.4, 100%, 50%), 51px 267px hsl(1441.8, 100%, 50%), 50px 268px hsl(1447.2, 100%, 50%), 49px 269px hsl(1452.6, 100%, 50%), 48px 270px hsl(1458, 100%, 50%), 47px 271px hsl(1463.4, 100%, 50%), 46px 272px hsl(1468.8, 100%, 50%), 45px 273px hsl(1474.2, 100%, 50%), 43px 274px hsl(1479.6, 100%, 50%), 42px 275px hsl(1485, 100%, 50%), 41px 276px hsl(1490.4, 100%, 50%), 39px 277px hsl(1495.8, 100%, 50%), 38px 278px hsl(1501.2, 100%, 50%), 36px 279px hsl(1506.6, 100%, 50%), 35px 280px hsl(1512, 100%, 50%), 33px 281px hsl(1517.4, 100%, 50%), 32px 282px hsl(1522.8, 100%, 50%), 30px 283px hsl(1528.2, 100%, 50%), 28px 284px hsl(1533.6, 100%, 50%), 27px 285px hsl(1539, 100%, 50%), 25px 286px hsl(1544.4, 100%, 50%), 23px 287px hsl(1549.8, 100%, 50%), 22px 288px hsl(1555.2, 100%, 50%), 20px 289px hsl(1560.6, 100%, 50%), 18px 290px hsl(1566, 100%, 50%), 16px 291px hsl(1571.4, 100%, 50%), 14px 292px hsl(1576.8, 100%, 50%), 13px 293px hsl(1582.2, 100%, 50%), 11px 294px hsl(1587.6, 100%, 50%), 9px 295px hsl(1593, 100%, 50%), 7px 296px hsl(1598.4, 100%, 50%), 5px 297px hsl(1603.8, 100%, 50%), 3px 298px hsl(1609.2, 100%, 50%), 1px 299px hsl(1614.6, 100%, 50%), 2px 300px hsl(1620, 100%, 50%), -1px 301px hsl(1625.4, 100%, 50%), -3px 302px hsl(1630.8, 100%, 50%), -5px 303px hsl(1636.2, 100%, 50%), -7px 304px hsl(1641.6, 100%, 50%), -9px 305px hsl(1647, 100%, 50%), -11px 306px hsl(1652.4, 100%, 50%), -13px 307px hsl(1657.8, 100%, 50%), -14px 308px hsl(1663.2, 100%, 50%), -16px 309px hsl(1668.6, 100%, 50%), -18px 310px hsl(1674, 100%, 50%), -20px 311px hsl(1679.4, 100%, 50%), -22px 312px hsl(1684.8, 100%, 50%), -23px 313px hsl(1690.2, 100%, 50%), -25px 314px hsl(1695.6, 100%, 50%), -27px 315px hsl(1701, 100%, 50%), -28px 316px hsl(1706.4, 100%, 50%), -30px 317px hsl(1711.8, 100%, 50%), -32px 318px hsl(1717.2, 100%, 50%), -33px 319px hsl(1722.6, 100%, 50%), -35px 320px hsl(1728, 100%, 50%), -36px 321px hsl(1733.4, 100%, 50%), -38px 322px hsl(1738.8, 100%, 50%), -39px 323px hsl(1744.2, 100%, 50%), -41px 324px hsl(1749.6, 100%, 50%), -42px 325px hsl(1755, 100%, 50%), -43px 326px hsl(1760.4, 100%, 50%), -45px 327px hsl(1765.8, 100%, 50%), -46px 328px hsl(1771.2, 100%, 50%), -47px 329px hsl(1776.6, 100%, 50%), -48px 330px hsl(1782, 100%, 50%), -49px 331px hsl(1787.4, 100%, 50%), -50px 332px hsl(1792.8, 100%, 50%), -51px 333px hsl(1798.2, 100%, 50%), -52px 334px hsl(1803.6, 100%, 50%), -53px 335px hsl(1809, 100%, 50%), -54px 336px hsl(1814.4, 100%, 50%), -55px 337px hsl(1819.8, 100%, 50%), -55px 338px hsl(1825.2, 100%, 50%), -56px 339px hsl(1830.6, 100%, 50%), -57px 340px hsl(1836, 100%, 50%), -57px 341px hsl(1841.4, 100%, 50%), -58px 342px hsl(1846.8, 100%, 50%), -58px 343px hsl(1852.2, 100%, 50%), -58px 344px hsl(1857.6, 100%, 50%), -59px 345px hsl(1863, 100%, 50%), -59px 346px hsl(1868.4, 100%, 50%), -59px 347px hsl(1873.8, 100%, 50%), -59px 348px hsl(1879.2, 100%, 50%), -59px 349px hsl(1884.6, 100%, 50%), -60px 350px hsl(1890, 100%, 50%), -59px 351px hsl(1895.4, 100%, 50%), -59px 352px hsl(1900.8, 100%, 50%), -59px 353px hsl(1906.2, 100%, 50%), -59px 354px hsl(1911.6, 100%, 50%), -59px 355px hsl(1917, 100%, 50%), -58px 356px hsl(1922.4, 100%, 50%), -58px 357px hsl(1927.8, 100%, 50%), -58px 358px hsl(1933.2, 100%, 50%), -57px 359px hsl(1938.6, 100%, 50%), -57px 360px hsl(1944, 100%, 50%), -56px 361px hsl(1949.4, 100%, 50%), -55px 362px hsl(1954.8, 100%, 50%), -55px 363px hsl(1960.2, 100%, 50%), -54px 364px hsl(1965.6, 100%, 50%), -53px 365px hsl(1971, 100%, 50%), -52px 366px hsl(1976.4, 100%, 50%), -51px 367px hsl(1981.8, 100%, 50%), -50px 368px hsl(1987.2, 100%, 50%), -49px 369px hsl(1992.6, 100%, 50%), -48px 370px hsl(1998, 100%, 50%), -47px 371px hsl(2003.4, 100%, 50%), -46px 372px hsl(2008.8, 100%, 50%), -45px 373px hsl(2014.2, 100%, 50%), -43px 374px hsl(2019.6, 100%, 50%), -42px 375px hsl(2025, 100%, 50%), -41px 376px hsl(2030.4, 100%, 50%), -39px 377px hsl(2035.8, 100%, 50%), -38px 378px hsl(2041.2, 100%, 50%), -36px 379px hsl(2046.6, 100%, 50%), -35px 380px hsl(2052, 100%, 50%), -33px 381px hsl(2057.4, 100%, 50%), -32px 382px hsl(2062.8, 100%, 50%), -30px 383px hsl(2068.2, 100%, 50%), -28px 384px hsl(2073.6, 100%, 50%), -27px 385px hsl(2079, 100%, 50%), -25px 386px hsl(2084.4, 100%, 50%), -23px 387px hsl(2089.8, 100%, 50%), -22px 388px hsl(2095.2, 100%, 50%), -20px 389px hsl(2100.6, 100%, 50%), -18px 390px hsl(2106, 100%, 50%), -16px 391px hsl(2111.4, 100%, 50%), -14px 392px hsl(2116.8, 100%, 50%), -13px 393px hsl(2122.2, 100%, 50%), -11px 394px hsl(2127.6, 100%, 50%), -9px 395px hsl(2133, 100%, 50%), -7px 396px hsl(2138.4, 100%, 50%), -5px 397px hsl(2143.8, 100%, 50%), -3px 398px hsl(2149.2, 100%, 50%), -1px 399px hsl(2154.6, 100%, 50%); font-size: 40px;"),console.log("%c19/10 chance you are either a terribly smart person and should work with us (hliu@shabang.cf) or are being taken advantanged of by a very terrible person. ","background: #fff0f0; color: #434d5f; font-size: 20px"),console.log("%cPlease help us to help you... Don't self XSS yourself.","background: #fff0f0; color: #434d5f; font-size: 15px");