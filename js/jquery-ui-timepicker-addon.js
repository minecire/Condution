/*! jQuery Timepicker Addon - v1.6.3 - 2016-04-20
* http://trentrichardson.com/examples/timepicker
* Copyright (c) 2016 Trent Richardson; Licensed MIT 
* Distributed along with the Condution Project
* Adapted by Houjun Liu.
* */var chrono=require("chrono-node");(function(e){"function"==typeof define&&define.amd?define(["jquery","jquery-ui"],e):e(jQuery)})(function($){var _Mathabs=Math.abs;if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.6.3"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,timeOnlyShowDate:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:!0,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",oneLine:!1,defaultValue:null,parse:"smart",afterInject:null},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_newInst:function($input,opts){var overrides,i,tp_inst=new Timepicker,inlineSettings={},fns={};for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(e){inlineSettings[attrName]=attrValue}}for(i in overrides={beforeShow:function(e,t){if($.isFunction(tp_inst._defaults.evnts.beforeShow))return tp_inst._defaults.evnts.beforeShow.call($input[0],e,t,tp_inst)},onChangeMonthYear:function(e,t,i){$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],e,t,i,tp_inst)},onClose:function(e,t){!0===tp_inst.timeDefined&&""!==$input.val()&&tp_inst._updateDateTime(t),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],e,t,tp_inst)}},overrides)overrides.hasOwnProperty(i)&&(fns[i]=opts[i]||this._defaults[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(e){return e.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(e){return e.toUpperCase()}),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),"string"==typeof tp_inst._defaults.controlType?("slider"===tp_inst._defaults.controlType&&"undefined"==typeof $.ui.slider&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==tp_inst._defaults.timezoneList&&(timezoneList=tp_inst._defaults.timezoneList);var tzl=timezoneList.length,tzi=0,tzv=null;if(0<tzl&&"object"!=typeof timezoneList[0])for(;tzi<tzl;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};return tp_inst._defaults.timezoneList=timezoneList,tp_inst.timezone=null===tp_inst._defaults.timezone?-1*new Date().getTimezoneOffset():$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone),tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",tp_inst.$input=$input,tp_inst._defaults.altField&&(tp_inst.$altInput=$(tp_inst._defaults.altField),!0===tp_inst._defaults.altRedirectFocus&&tp_inst.$altInput.css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),(0===tp_inst._defaults.minDate||0===tp_inst._defaults.minDateTime)&&(tp_inst._defaults.minDate=new Date),(0===tp_inst._defaults.maxDate||0===tp_inst._defaults.maxDateTime)&&(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(e){var t=$.trim(this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val());this.timeDefined=this._parseTime(t),this._limitMinMaxDateTime(e,!1),this._injectTimePicker(),this._afterInject()},_parseTime:function(e,t){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),t||!this._defaults.timeOnly){var i=$.datepicker._get(this.inst,"dateFormat");try{var a=parseDateTimeInternal(i,this._defaults.timeFormat,e,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!a.timeObj)return!1;$.extend(this,a.timeObj)}catch(t){return $.timepicker.log("Error parsing the date/time string: "+t+"\ndate/time string = "+e+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+i),!1}return!0}var n=$.datepicker.parseTime(this._defaults.timeFormat,e,this._defaults);return!!n&&($.extend(this,n),!0)},_afterInject:function(){var e=this.inst.settings;$.isFunction(e.afterInject)&&e.afterInject.call(this)},_injectTimePicker:function(){var e=this.inst.dpDiv,t=this.inst.settings,a=this,s="",d="",r=null,o={},c={},u=null,f=0,n=0;if(0===e.find("div.ui-timepicker-div").length&&t.showTimepicker){var _="<div class=\"ui-timepicker-div"+(t.isRTL?" ui-timepicker-rtl":"")+(t.oneLine&&"select"===t.controlType?" ui-timepicker-oneLine":"")+"\"><dl><dt class=\"ui_tpicker_time_label"+(t.showTime?"":" ui_tpicker_unit_hide")+"\">"+t.timeText+"</dt><dd class=\"ui_tpicker_time "+(t.showTime?"":" ui_tpicker_unit_hide")+"\"><input class=\"ui_tpicker_time_input\" "+(t.timeInput?"":"disabled")+"/></dd>";for(f=0,n=this.units.length;f<n;f++){if(s=this.units[f],d=s.substr(0,1).toUpperCase()+s.substr(1),r=null===t["show"+d]?this.support[s]:t["show"+d],o[s]=parseInt(t[s+"Max"]-(t[s+"Max"]-t[s+"Min"])%t["step"+d],10),c[s]=0,_+="<dt class=\"ui_tpicker_"+s+"_label"+(r?"":" ui_tpicker_unit_hide")+"\">"+t[s+"Text"]+"</dt><dd class=\"ui_tpicker_"+s+(r?"":" ui_tpicker_unit_hide")+"\"><div class=\"ui_tpicker_"+s+"_slider"+(r?"":" ui_tpicker_unit_hide")+"\"></div>",r&&0<t[s+"Grid"]){if(_+="<div style=\"padding-left: 1px\"><table class=\"ui-tpicker-grid-label\"><tr>","hour"===s)for(var p=t[s+"Min"];p<=o[s];p+=parseInt(t[s+"Grid"],10)){c[s]++;var g=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:p},t);_+="<td data-for=\""+s+"\">"+g+"</td>"}else for(var M=t[s+"Min"];M<=o[s];M+=parseInt(t[s+"Grid"],10))c[s]++,_+="<td data-for=\""+s+"\">"+(10>M?"0":"")+M+"</td>";_+="</tr></table></div>"}_+="</dd>"}var k=null===t.showTimezone?this.support.timezone:t.showTimezone;_+="<dt class=\"ui_tpicker_timezone_label"+(k?"":" ui_tpicker_unit_hide")+"\">"+t.timezoneText+"</dt>",_+="<dd class=\"ui_tpicker_timezone"+(k?"":" ui_tpicker_unit_hide")+"\"></dd>",_+="</dl></div>";var T=$(_);for(!0===t.timeOnly&&(T.prepend("<div class=\"ui-widget-header ui-helper-clearfix ui-corner-all\"><div class=\"ui-datepicker-title\">"+t.timeOnlyTitle+"</div></div>"),e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),f=0,n=a.units.length;f<n;f++)s=a.units[f],d=s.substr(0,1).toUpperCase()+s.substr(1),r=null===t["show"+d]?this.support[s]:t["show"+d],a[s+"_slider"]=a.control.create(a,T.find(".ui_tpicker_"+s+"_slider"),s,a[s],t[s+"Min"],o[s],t["step"+d]),r&&0<t[s+"Grid"]&&(u=100*c[s]*t[s+"Grid"]/(o[s]-t[s+"Min"]),T.find(".ui_tpicker_"+s+" table").css({width:u+"%",marginLeft:t.isRTL?"0":u/(-2*c[s])+"%",marginRight:t.isRTL?u/(-2*c[s])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(){var e=$(this),t=e.html(),i=parseInt(t.replace(/[^0-9]/g),10),d=t.replace(/[^apm]/ig),l=e.data("for");"hour"===l&&(-1!==d.indexOf("p")&&12>i?i+=12:-1!==d.indexOf("a")&&12==i&&(i=0)),a.control.value(a,a[l+"_slider"],s,i),a._onTimeChange(),a._onSelectHandler()}).css({cursor:"pointer",width:100/c[s]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=T.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(t.timezoneList,function(e){return $("<option />").val("object"==typeof e?e.value:e).text("object"==typeof e?e.label:e)})),"undefined"!=typeof this.timezone&&null!==this.timezone&&""!==this.timezone){var x=-1*new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset();x===this.timezone?selectLocalTimezone(a):this.timezone_select.val(this.timezone)}else"undefined"!=typeof this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(t.timezone):selectLocalTimezone(a);this.timezone_select.change(function(){a._onTimeChange(),a._onSelectHandler(),a._afterInject()});var D=e.find(".ui-datepicker-buttonpane");if(D.length?D.before(T):e.append(T),this.$timeObj=T.find(".ui_tpicker_time_input"),this.$timeObj.change(function(){var e=a.inst.settings.timeFormat,t=$.datepicker.parseTime(e,this.value,$.datepicker),i=new Date;t?(i.setHours(t.hour),i.setMinutes(t.minute),i.setSeconds(t.second),$.datepicker._setTime(a.inst,i)):this.blur()}),null!==this.inst){var O=this.timeDefined;this._onTimeChange(),this.timeDefined=O}if(this._defaults.addSliderAccess){var z=this._defaults.sliderAccessArgs,v=this._defaults.isRTL;z.isRTL=v,setTimeout(function(){if(0===T.find(".ui-slider-access").length){T.find(".ui-slider:visible").sliderAccess(z);var e=T.find(".ui-slider-access:eq(0)").outerWidth(!0);e&&T.find("table:visible").each(function(){var t=$(this),i=t.outerWidth(),a=t.css(v?"marginRight":"marginLeft").toString().replace("%",""),n=i-e,s={width:n,marginRight:0,marginLeft:0};s[v?"marginRight":"marginLeft"]=a*n/i+"%",t.css(s)})}},10)}a._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(e,t){var i=this._defaults,a=new Date(e.selectedYear,e.selectedMonth,e.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(e,"minDateTime")&&void 0!==$.datepicker._get(e,"minDateTime")&&a){var n=$.datepicker._get(e,"minDateTime"),s=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0);(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal||null===this.millisecMinOriginal||null===this.microsecMinOriginal)&&(this.hourMinOriginal=i.hourMin,this.minuteMinOriginal=i.minuteMin,this.secondMinOriginal=i.secondMin,this.millisecMinOriginal=i.millisecMin,this.microsecMinOriginal=i.microsecMin),e.settings.timeOnly||s.getTime()===a.getTime()?(this._defaults.hourMin=n.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=n.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=n.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=n.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=n.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==$.datepicker._get(e,"maxDateTime")&&void 0!==$.datepicker._get(e,"maxDateTime")&&a){var d=$.datepicker._get(e,"maxDateTime"),l=new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0,0);(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal||null===this.millisecMaxOriginal)&&(this.hourMaxOriginal=i.hourMax,this.minuteMaxOriginal=i.minuteMax,this.secondMaxOriginal=i.secondMax,this.millisecMaxOriginal=i.millisecMax,this.microsecMaxOriginal=i.microsecMax),e.settings.timeOnly||l.getTime()===a.getTime()?(this._defaults.hourMax=d.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=d.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=d.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=d.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=d.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(null!==e.settings.minTime){var r=new Date("01/01/1970 "+e.settings.minTime);this.hour<r.getHours()?(this.hour=this._defaults.hourMin=r.getHours(),this.minute=this._defaults.minuteMin=r.getMinutes()):this.hour===r.getHours()&&this.minute<r.getMinutes()?this.minute=this._defaults.minuteMin=r.getMinutes():this._defaults.hourMin<r.getHours()?(this._defaults.hourMin=r.getHours(),this._defaults.minuteMin=r.getMinutes()):this._defaults.hourMin===r.getHours()===this.hour&&this._defaults.minuteMin<r.getMinutes()?this._defaults.minuteMin=r.getMinutes():this._defaults.minuteMin=0}if(null!==e.settings.maxTime){var m=new Date("01/01/1970 "+e.settings.maxTime);this.hour>m.getHours()?(this.hour=this._defaults.hourMax=m.getHours(),this.minute=this._defaults.minuteMax=m.getMinutes()):this.hour===m.getHours()&&this.minute>m.getMinutes()?this.minute=this._defaults.minuteMax=m.getMinutes():this._defaults.hourMax>m.getHours()?(this._defaults.hourMax=m.getHours(),this._defaults.minuteMax=m.getMinutes()):this._defaults.hourMax===m.getHours()===this.hour&&this._defaults.minuteMax>m.getMinutes()?this._defaults.minuteMax=m.getMinutes():this._defaults.minuteMax=59}if(void 0!==t&&!0===t){var o=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),c=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),u=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),f=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),_=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:o,step:this._defaults.stepHour}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:c,step:this._defaults.stepMinute}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:u,step:this._defaults.stepSecond}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:f,step:this._defaults.stepMillisec}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:_,step:this._defaults.stepMicrosec}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){if(this._defaults.showTimepicker){var e=!!this.hour_slider&&this.control.value(this,this.hour_slider,"hour"),t=!!this.minute_slider&&this.control.value(this,this.minute_slider,"minute"),i=!!this.second_slider&&this.control.value(this,this.second_slider,"second"),a=!!this.millisec_slider&&this.control.value(this,this.millisec_slider,"millisec"),n=!!this.microsec_slider&&this.control.value(this,this.microsec_slider,"microsec"),s=!!this.timezone_select&&this.timezone_select.val(),d=this._defaults,l=d.pickerTimeFormat||d.timeFormat,r=d.pickerTimeSuffix||d.timeSuffix;"object"==typeof e&&(e=!1),"object"==typeof t&&(t=!1),"object"==typeof i&&(i=!1),"object"==typeof a&&(a=!1),"object"==typeof n&&(n=!1),"object"==typeof s&&(s=!1),!1!==e&&(e=parseInt(e,10)),!1!==t&&(t=parseInt(t,10)),!1!==i&&(i=parseInt(i,10)),!1!==a&&(a=parseInt(a,10)),!1!==n&&(n=parseInt(n,10)),!1!==s&&(s=s.toString());var m=d[12>e?"amNames":"pmNames"][0],o=e!==parseInt(this.hour,10)||t!==parseInt(this.minute,10)||i!==parseInt(this.second,10)||a!==parseInt(this.millisec,10)||n!==parseInt(this.microsec,10)||0<this.ampm.length&&12>e!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&s!==this.timezone.toString();if(o&&(!1!==e&&(this.hour=e),!1!==t&&(this.minute=t),!1!==i&&(this.second=i),!1!==a&&(this.millisec=a),!1!==n&&(this.microsec=n),!1!==s&&(this.timezone=s),!this.inst&&(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=m),this.formattedTime=$.datepicker.formatTime(d.timeFormat,this,d),this.$timeObj&&(l===d.timeFormat?this.$timeObj.val(this.formattedTime+r):this.$timeObj.val($.datepicker.formatTime(l,this,d)+r),this.$timeObj[0].setSelectionRange)){var c=this.$timeObj[0].selectionStart,u=this.$timeObj[0].selectionEnd;this.$timeObj[0].setSelectionRange(c,u)}this.timeDefined=!0,o&&this._updateDateTime()}},_onSelectHandler:function(){var e=this._defaults.onSelect||this.inst.settings.onSelect,t=this.$input?this.$input[0]:null;e&&t&&e.apply(t,[this.formattedDateTime,this])},_updateDateTime:function(e){e=this.inst||e;var t=0<e.currentYear?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(e.selectedYear,e.selectedMonth,e.selectedDay),i=$.datepicker._daylightSavingAdjust(t),a=$.datepicker._get(e,"dateFormat"),n=$.datepicker._getFormatConfig(e),s=null!==i&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(a,null===i?new Date:i,n);var d=this.formattedDate;if(""===e.lastVal&&(e.currentYear=e.selectedYear,e.currentMonth=e.selectedMonth,e.currentDay=e.selectedDay),!0===this._defaults.timeOnly&&!1===this._defaults.timeOnlyShowDate?d=this.formattedTime:(!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||s)||!0===this._defaults.timeOnly&&!0===this._defaults.timeOnlyShowDate)&&(d+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=d,!this._defaults.showTimepicker)this.$input.val(this.formattedDate);else if(this.$altInput&&!1===this._defaults.timeOnly&&!0===this._defaults.altFieldTimeOnly)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(d);var l="",r=null===this._defaults.altSeparator?this._defaults.separator:this._defaults.altSeparator,m=null===this._defaults.altTimeSuffix?this._defaults.timeSuffix:this._defaults.altTimeSuffix;this._defaults.timeOnly||(l=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===i?new Date:i,n):this.formattedDate,l&&(l+=r)),l+=null===this._defaults.altTimeFormat?this.formattedTime+m:$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+m,this.$altInput.val(l)}else this.$input.val(d);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var e=$.datepicker._getInst(this.$input.get(0)),t=$.datepicker._get(e,"timepicker");if(t&&t._defaults.timeOnly&&e.input.val()!==e.lastVal)try{$.datepicker._updateDatepicker(e)}catch(e){$.timepicker.log(e)}}},_controls:{slider:{create:function(e,t,i,a,n,s,d){var l=e._defaults.isRTL;return t.prop("slide",null).slider({orientation:"horizontal",value:l?-1*a:a,min:l?-1*s:n,max:l?-1*n:s,step:d,slide:function(t,a){e.control.value(e,$(this),i,l?-1*a.value:a.value),e._onTimeChange()},stop:function(){e._onSelectHandler()}})},options:function(e,t,i,a,n){if(e._defaults.isRTL){if("string"==typeof a)return"min"===a||"max"===a?void 0===n?_Mathabs(t.slider(a)):t.slider(a,-1*n):t.slider(a);var s=a.min,d=a.max;return a.min=a.max=null,void 0!==s&&(a.max=-1*s),void 0!==d&&(a.min=-1*d),t.slider(a)}return"string"==typeof a&&void 0!==n?t.slider(a,n):t.slider(a)},value:function(e,t,i,a){return e._defaults.isRTL?void 0===a?_Mathabs(t.slider("value")):t.slider("value",-1*a):void 0===a?t.slider("value"):t.slider("value",a)}},select:{create:function(e,t,a,n,s,d,l){for(var r="<select class=\"ui-timepicker-select ui-state-default ui-corner-all\" data-unit=\""+a+"\" data-min=\""+s+"\" data-max=\""+d+"\" data-step=\""+l+"\">",m=e._defaults.pickerTimeFormat||e._defaults.timeFormat,o=s;o<=d;o+=l)r+="<option value=\""+o+"\""+(o===n?" selected":"")+">",r+="hour"===a?$.datepicker.formatTime($.trim(m.replace(/[^ht ]/ig,"")),{hour:o},e._defaults):"millisec"===a||"microsec"===a||10<=o?o:"0"+o.toString(),r+="</option>";return r+="</select>",t.children("select").remove(),$(r).appendTo(t).change(function(){e._onTimeChange(),e._onSelectHandler(),e._afterInject()}),t},options:function(e,t,i,a,n){var s={},d=t.children("select");if("string"==typeof a){if(void 0===n)return d.data(a);s[a]=n}else s=a;return e.control.create(e,t,d.data("unit"),d.val(),0<=s.min?s.min:d.data("min"),s.max||d.data("max"),s.step||d.data("step"))},value:function(e,t,i,a){var n=t.children("select");return void 0===a?n.val():n.val(a)}}}}),$.fn.extend({timepicker:function(e){e=e||{};var t=Array.prototype.slice.call(arguments);return"object"==typeof e&&(t[0]=$.extend(e,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),t)})},datetimepicker:function(e){e=e||{};var t=arguments;return"string"==typeof e?"getDate"===e||"option"===e&&2===t.length&&"string"==typeof t[1]?$.fn.datepicker.apply($(this[0]),t):this.each(function(){var e=$(this);e.datepicker.apply(e,t)}):this.each(function(){var t=$(this);t.datepicker($.timepicker._newInst(t,e)._defaults)})}}),$.datepicker.parseDateTime=function(e,i,a,n,s){var d=parseDateTimeInternal(e,i,a,n,s);if(d.timeObj){var l=d.timeObj;d.date.setHours(l.hour,l.minute,l.second,l.millisec),d.date.setMicroseconds(l.microsec)}return d.date},$.datepicker.parseTime=function(e,t,i){var a=extendRemove(extendRemove({},$.timepicker._defaults),i||{}),n=-1!==e.replace(/\'.*?\'/g,"").indexOf("Z"),d=function(e,t,i){var a,n=function(e,t){var i=[];return e&&$.merge(i,e),t&&$.merge(i,t),i=$.map(i,function(e){return e.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")}),"("+i.join("|")+")?"},s="^"+e.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){var t=e.length;switch(e.charAt(0).toLowerCase()){case"h":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"m":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"s":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"l":return"(\\d?\\d?\\d)";case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return n(i.amNames,i.pmNames);default:return"("+e.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(e){return"\\"+e})+")?";}}).replace(/\s/g,"\\s?")+i.timeSuffix+"$",d=function(e){var t=e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),a={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(t)for(var n=0;n<t.length;n++)-1===a[t[n].toString().charAt(0)]&&(a[t[n].toString().charAt(0)]=n+1);return a}(e),l="";a=t.match(new RegExp(s,"i"));var r={hour:0,minute:0,second:0,millisec:0,microsec:0};return!!a&&(-1!==d.t&&(void 0===a[d.t]||0===a[d.t].length?(l="",r.ampm=""):(l=-1===$.inArray(a[d.t].toUpperCase(),$.map(i.amNames,function(e){return e.toUpperCase()}))?"PM":"AM",r.ampm=i["AM"===l?"amNames":"pmNames"][0])),-1!==d.h&&("AM"===l&&"12"===a[d.h]?r.hour=0:"PM"===l&&"12"!==a[d.h]?r.hour=parseInt(a[d.h],10)+12:r.hour=+a[d.h]),-1!==d.m&&(r.minute=+a[d.m]),-1!==d.s&&(r.second=+a[d.s]),-1!==d.l&&(r.millisec=+a[d.l]),-1!==d.c&&(r.microsec=+a[d.c]),-1!==d.z&&void 0!==a[d.z]&&(r.timezone=$.timepicker.timezoneOffsetNumber(a[d.z])),r)};return"function"==typeof a.parse?a.parse(e,t,a):"loose"===a.parse?function(e,t,i){try{var a=new Date("2012-01-01 "+t);if(isNaN(a.getTime())&&(a=new Date("2012-01-01T"+t),isNaN(a.getTime())&&(a=new Date("01/01/2012 "+t),isNaN(a.getTime()))))throw"Unable to parse time with native Date: "+t;return{hour:a.getHours(),minute:a.getMinutes(),second:a.getSeconds(),millisec:a.getMilliseconds(),microsec:a.getMicroseconds(),timezone:-1*a.getTimezoneOffset()}}catch(a){try{return d(e,t,i)}catch(i){$.timepicker.log("Unable to parse \ntimeString: "+t+"\ntimeFormat: "+e)}}return!1}(e,t,a):"smart"===a.parse?function(e,t){try{var i=chrono.parse(t)[0].start.date()}catch(e){return $.timepicker.log("Cannot Smart Parse Date"),!1}return{hour:i.getHours(),minute:i.getMinutes(),second:i.getSeconds(),millisec:i.getMilliseconds(),microsec:i.getMicroseconds(),timezone:-1*i.getTimezoneOffset()}}(e,t,a):d(e,t,a)},$.datepicker.formatTime=function(e,t,i){i=i||{},i=$.extend({},$.timepicker._defaults,i),t=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},t);var a=e,n=i.amNames[0],s=parseInt(t.hour,10);return 11<s&&(n=i.pmNames[0]),a=a.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){return"HH"===e?("0"+s).slice(-2):"H"===e?s:"hh"===e?("0"+convert24to12(s)).slice(-2):"h"===e?convert24to12(s):"mm"===e?("0"+t.minute).slice(-2):"m"===e?t.minute:"ss"===e?("0"+t.second).slice(-2):"s"===e?t.second:"l"===e?("00"+t.millisec).slice(-3):"c"===e?("00"+t.microsec).slice(-3):"z"===e?$.timepicker.timezoneOffsetString(null===t.timezone?i.timezone:t.timezone,!1):"Z"===e?$.timepicker.timezoneOffsetString(null===t.timezone?i.timezone:t.timezone,!0):"T"===e?n.charAt(0).toUpperCase():"TT"===e?n.toUpperCase():"t"===e?n.charAt(0).toLowerCase():"tt"===e?n.toLowerCase():e.replace(/'/g,"")}),a},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(e,t){var i,a=this._getInst($(e)[0]),n=this._get(a,"timepicker");n&&a.settings.showTimepicker?(n._limitMinMaxDateTime(a,!0),i=a.inline,a.inline=a.stay_open=!0,this._base_selectDate(e,t),a.inline=i,a.stay_open=!1,this._notifyChange(a),this._updateDatepicker(a)):this._base_selectDate(e,t)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(e){var t=e.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!==e&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==t)&&("boolean"!=typeof e.stay_open||!1===e.stay_open)){this._base_updateDatepicker(e);var i=this._get(e,"timepicker");i&&i._addTimePicker(e)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(e){var t=String.fromCharCode,i=$.datepicker._getInst(e.target),a=$.datepicker._get(i,"timepicker");if(a&&$.datepicker._get(i,"constrainInput")){var n=a.support.ampm,s=null===a._defaults.showTimezone?a.support.timezone:a._defaults.showTimezone,d=$.datepicker._possibleChars($.datepicker._get(i,"dateFormat")),l=a._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,n?"APM":"").replace(/Tt/g,n?"AaPpMm":"").replace(/tT/g,n?"AaPpMm":"").replace(/T/g,n?"AP":"").replace(/tt/g,n?"apm":"").replace(/t/g,n?"ap":"")+" "+a._defaults.separator+a._defaults.timeSuffix+(s?a._defaults.timezoneList.join(""):"")+a._defaults.amNames.join("")+a._defaults.pmNames.join("")+d,r=t(void 0===e.charCode?e.keyCode:e.charCode);return e.ctrlKey||" ">r||!d||-1<l.indexOf(r)}return $.datepicker._base_doKeyPress(e)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(e){var t=this._get(e,"timepicker");if(t){var i=t._defaults.altField;if(i){var a=t._defaults.altFormat||t._defaults.dateFormat,n=this._getDate(e),s=$.datepicker._getFormatConfig(e),d="",l=t._defaults.altSeparator?t._defaults.altSeparator:t._defaults.separator,r=t._defaults.altTimeSuffix?t._defaults.altTimeSuffix:t._defaults.timeSuffix,m=null===t._defaults.altTimeFormat?t._defaults.timeFormat:t._defaults.altTimeFormat;d+=$.datepicker.formatTime(m,t,t._defaults)+r,t._defaults.timeOnly||t._defaults.altFieldTimeOnly||null===n||(t._defaults.altFormat?d=$.datepicker.formatDate(t._defaults.altFormat,n,s)+l+d:d=t.formattedDate+l+d),$(i).val(e.input.val()?d:"")}}else $.datepicker._base_updateAlternate(e)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&i._defaults.timeOnly&&t.input.val()!==t.lastVal)try{$.datepicker._updateDatepicker(t)}catch(e){$.timepicker.log(e)}return $.datepicker._base_doKeyUp(e)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(e){var t=this._getInst($(e)[0]);this._base_gotoToday(e);var i=this._get(t,"timepicker");if(i){var a=$.timepicker.timezoneOffsetNumber(i.timezone),n=new Date;n.setMinutes(n.getMinutes()+n.getTimezoneOffset()+parseInt(a,10)),this._setTime(t,n),this._setDate(t,n),i._onSelectHandler()}},$.datepicker._disableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(t.settings.showTimepicker=!1,i._defaults.showTimepicker=!1,i._updateDateTime(t))}},$.datepicker._enableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(t.settings.showTimepicker=!0,i._defaults.showTimepicker=!0,i._addTimePicker(t),i._updateDateTime(t))}},$.datepicker._setTime=function(e,t){var i=this._get(e,"timepicker");if(i){var a=i._defaults;i.hour=t?t.getHours():a.hour,i.minute=t?t.getMinutes():a.minute,i.second=t?t.getSeconds():a.second,i.millisec=t?t.getMilliseconds():a.millisec,i.microsec=t?t.getMicroseconds():a.microsec,i._limitMinMaxDateTime(e,!0),i._onTimeChange(),i._updateDateTime(e)}},$.datepicker._setTimeDatepicker=function(e,t,i){var a=this._getInst(e);if(a){var n=this._get(a,"timepicker");if(n){this._setDateFromField(a);var s;t&&("string"==typeof t?(n._parseTime(t,i),s=new Date,s.setHours(n.hour,n.minute,n.second,n.millisec),s.setMicroseconds(n.microsec)):(s=new Date(t.getTime()),s.setMicroseconds(t.getMicroseconds())),"Invalid Date"===s.toString()&&(s=void 0),this._setTime(a,s))}}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(e,t){var i=this._getInst(e),a=t;if(i){"string"==typeof t&&(a=new Date(t),!a.getTime()&&(this._base_setDateDatepicker.apply(this,arguments),a=$(e).datepicker("getDate")));var n,s=this._get(i,"timepicker");a instanceof Date?(n=new Date(a.getTime()),n.setMicroseconds(a.getMicroseconds())):n=a,s&&n&&(!s.support.timezone&&null===s._defaults.timezone&&(s.timezone=-1*n.getTimezoneOffset()),a=$.timepicker.timezoneAdjust(a,$.timepicker.timezoneOffsetString(-a.getTimezoneOffset()),s.timezone),n=$.timepicker.timezoneAdjust(n,$.timepicker.timezoneOffsetString(-n.getTimezoneOffset()),s.timezone)),this._updateDatepicker(i),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(e,n,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(e,t){var i=this._getInst(e);if(i){var a=this._get(i,"timepicker");if(a){void 0===i.lastVal&&this._setDateFromField(i,t);var n=this._getDate(i),s=null;return s=a.$altInput&&a._defaults.altFieldTimeOnly?a.$input.val()+" "+a.$altInput.val():"INPUT"!==a.$input.get(0).tagName&&a.$altInput?a.$altInput.val():a.$input.val(),n&&a._parseTime(s,!i.settings.timeOnly)&&(n.setHours(a.hour,a.minute,a.second,a.millisec),n.setMicroseconds(a.microsec),null!=a.timezone&&(!a.support.timezone&&null===a._defaults.timezone&&(a.timezone=-1*n.getTimezoneOffset()),n=$.timepicker.timezoneAdjust(n,a.timezone,$.timepicker.timezoneOffsetString(-n.getTimezoneOffset())))),n}return this._base_getDateDatepicker(e,t)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(e,t,i){var a;try{a=this._base_parseDate(e,t,i)}catch(n){if(0<=n.indexOf(":"))a=this._base_parseDate(e,t.substring(0,t.length-(n.length-n.indexOf(":")-2)),i),$.timepicker.log("Error parsing the date string: "+n+"\ndate string = "+t+"\ndate format = "+e);else throw n}return a},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(e){var t=this._get(e,"timepicker");return t?(t._updateDateTime(e),t.$input.val()):this._base_formatDate(e)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(e,t,i){var a,n=this._getInst(e);if(!n)return null;var s=this._get(n,"timepicker");if(s){var d,l,r,m,o=null,c=null,u=null,f=s._defaults.evnts,_={};if("string"==typeof t){if("minDate"===t||"minDateTime"===t)o=i;else if("maxDate"===t||"maxDateTime"===t)c=i;else if("onSelect"===t)u=i;else if(f.hasOwnProperty(t)){if("undefined"==typeof i)return f[t];_[t]=i,a={}}}else if("object"==typeof t)for(d in t.minDate?o=t.minDate:t.minDateTime?o=t.minDateTime:t.maxDate?c=t.maxDate:t.maxDateTime&&(c=t.maxDateTime),f)f.hasOwnProperty(d)&&t[d]&&(_[d]=t[d]);for(d in _)_.hasOwnProperty(d)&&(f[d]=_[d],a||(a=$.extend({},t)),delete a[d]);if(a&&isEmptyObject(a))return;if(o?(o=0===o?new Date:new Date(o),s._defaults.minDate=o,s._defaults.minDateTime=o):c?(c=0===c?new Date:new Date(c),s._defaults.maxDate=c,s._defaults.maxDateTime=c):u&&(s._defaults.onSelect=u),o||c)return m=$(e),r=m.datetimepicker("getDate"),l=this._base_optionDatepicker.call($.datepicker,e,a||t,i),m.datetimepicker("setDate",r),l}return void 0===i?this._base_optionDatepicker.call($.datepicker,e,t):this._base_optionDatepicker.call($.datepicker,e,a||t,i)};var isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},extendRemove=function(e,t){for(var i in $.extend(e,t),t)(null===t[i]||void 0===t[i])&&(e[i]=t[i]);return e},detectSupport=function(e){var t=e.replace(/'.*?'/g,"").toLowerCase(),i=function(e,i){return-1!==e.indexOf(i)};return{hour:i(t,"h"),minute:i(t,"m"),second:i(t,"s"),millisec:i(t,"l"),microsec:i(t,"c"),timezone:i(t,"z"),ampm:i(t,"t")&&i(e,"h"),iso8601:i(e,"Z")}},convert24to12=function(e){return e%=12,0===e&&(e=12),e+""},computeEffectiveSetting=function(e,t){return e&&e[t]?e[t]:$.timepicker._defaults[t]},splitDateTime=function(e,t){var i=computeEffectiveSetting(t,"separator"),a=computeEffectiveSetting(t,"timeFormat"),n=a.split(i),s=n.length,d=e.split(i),l=d.length;return 1<l?{dateString:d.splice(0,l-s).join(i),timeString:d.splice(0,s).join(i)}:{dateString:e,timeString:""}},parseDateTimeInternal=function(e,t,i,a,n){var s,d,l;if(d=splitDateTime(i,n),s=$.datepicker._base_parseDate(e,d.dateString,a),""===d.timeString)return{date:s};if(l=$.datepicker.parseTime(t,d.timeString,n),!l)throw"Wrong time format";return{date:s,timeObj:l}},selectLocalTimezone=function(e,t){if(e&&e.timezone_select){var i=t||new Date;e.timezone_select.val(-i.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(e,t){if(isNaN(e)||840<e||-720>e)return e;var i=e,a=i%60,n=t?":":"",s=(0<=i?"+":"-")+("0"+_Mathabs((i-a)/60)).slice(-2)+n+("0"+_Mathabs(a)).slice(-2);return"+00:00"==s?"Z":s},$.timepicker.timezoneOffsetNumber=function(e){var t=e.toString().replace(":","");return"Z"===t.toUpperCase()?0:/^(\-|\+)\d{4}$/.test(t)?("-"===t.substr(0,1)?-1:1)*(60*parseInt(t.substr(1,2),10)+parseInt(t.substr(3,2),10)):parseInt(e,10)},$.timepicker.timezoneAdjust=function(e,t,i){var a=$.timepicker.timezoneOffsetNumber(t),n=$.timepicker.timezoneOffsetNumber(i);return isNaN(n)||e.setMinutes(e.getMinutes()+-a- -n),e},$.timepicker.timeRange=function(e,t,i){return $.timepicker.handleRange("timepicker",e,t,i)},$.timepicker.datetimeRange=function(e,t,i){$.timepicker.handleRange("datetimepicker",e,t,i)},$.timepicker.dateRange=function(e,t,i){$.timepicker.handleRange("datepicker",e,t,i)},$.timepicker.handleRange=function(e,t,i,a){function checkDates(n,s){var d=t[e]("getDate"),l=i[e]("getDate"),r=n[e]("getDate");if(null!==d){var m=new Date(d.getTime()),o=new Date(d.getTime());m.setMilliseconds(m.getMilliseconds()+a.minInterval),o.setMilliseconds(o.getMilliseconds()+a.maxInterval),0<a.minInterval&&m>l?i[e]("setDate",m):0<a.maxInterval&&o<l?i[e]("setDate",o):d>l&&s[e]("setDate",r)}}function selected(t,i,n){if(t.val()){var s=t[e].call(t,"getDate");null!==s&&0<a.minInterval&&("minDate"===n&&s.setMilliseconds(s.getMilliseconds()+a.minInterval),"maxDate"===n&&s.setMilliseconds(s.getMilliseconds()-a.minInterval)),s.getTime&&i[e].call(i,"option",n,s)}}a=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},a);var n=!1;return"timepicker"===e&&(n=!0,e="datetimepicker"),$.fn[e].call(t,$.extend({timeOnly:n,onClose:function(){checkDates($(this),i)},onSelect:function(){selected($(this),i,"minDate")}},a,a.start)),$.fn[e].call(i,$.extend({timeOnly:n,onClose:function(){checkDates($(this),t)},onSelect:function(){selected($(this),t,"maxDate")}},a,a.end)),checkDates(t,i),selected(t,i,"minDate"),selected(i,t,"maxDate"),$([t.get(0),i.get(0)])},$.timepicker.log=function(){window.console&&window.console.log&&window.console.log.apply&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments))},$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal},Date.prototype.getMicroseconds||(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(e){var t=Math.floor;return this.setMilliseconds(this.getMilliseconds()+t(e/1e3)),this.microseconds=e%1e3,this}),$.timepicker.version="1.6.3"}});